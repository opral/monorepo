Select version diff benchmark query plan

Generated at: 2025-11-10T17:58:26.680Z

# Query 1

Time:
22.17ms

Original SQL:
select * from (
WITH
  -- Source side should expose explicit deletions (tombstones)
  -- Use state_with_tombstones to include rows with NULL snapshot_content
  s AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id, snapshot_content
    FROM state_with_tombstones
    WHERE version_id = '01920000-0000-7000-8000-000000000026'
  ),
  t AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id
    FROM state_by_version
    WHERE version_id = '01920000-0000-7000-8000-000000000044'
  ),
  joined AS (
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      s.version_id AS after_version_id,
      s.change_id AS after_change_id,
      s.commit_id AS after_commit_id,
      CASE
        -- Explicit delete in source (tombstone takes precedence)
        WHEN s.snapshot_content IS NULL THEN 'removed'
        -- Added in source only (live row)
        WHEN t.change_id IS NULL AND s.snapshot_content IS NOT NULL THEN 'added'
        -- Both present and different (live row in source)
        WHEN t.change_id IS NOT NULL AND s.snapshot_content IS NOT NULL AND s.change_id != t.change_id THEN 'modified'
        -- Both present and same (live row in source)
        ELSE 'unchanged'
      END AS status
    FROM s
    LEFT JOIN t ON t.entity_id = s.entity_id AND t.schema_key = s.schema_key AND t.file_id = s.file_id
    UNION ALL
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      -- For target-only rows (no source contribution), mirror target values for after_*
      -- This represents entities that exist in target but were never in source
      t.version_id AS after_version_id,
      t.change_id AS after_change_id,
      t.commit_id AS after_commit_id,
      CASE
        -- Target-only: entity exists in target but never existed in source (no explicit delete)
        -- Treated as unchanged since source doesn't modify it
        WHEN s.change_id IS NULL AND t.change_id IS NOT NULL THEN 'unchanged'
        ELSE 'unchanged'
      END AS status
    FROM t
    LEFT JOIN s ON s.entity_id = t.entity_id AND s.schema_key = t.schema_key AND s.file_id = t.file_id
    WHERE s.change_id IS NULL
  )
SELECT *
FROM joined
    ) as "diff"

Rewritten SQL:
SELECT *
FROM (WITH s AS (
  SELECT
    entity_id,
    schema_key,
    file_id,
    change_id,
    commit_id,
    version_id,
    snapshot_content
  FROM (SELECT
    entity_id,
    schema_key,
    file_id,
    version_id,
    plugin_key,
    snapshot_content,
    schema_version,
    created_at,
    updated_at,
    inherited_from_version_id,
    change_id,
    untracked,
    commit_id,
    writer_key,
    (SELECT json(metadata)
  FROM (SELECT
    c.id,
    c.entity_id,
    c.schema_key,
    c.schema_version,
    c.file_id,
    c.plugin_key,
    json(c.metadata) AS metadata,
    c.created_at,
    json(s.content) AS snapshot_content
  FROM lix_internal_change AS c LEFT JOIN lix_internal_snapshot AS s ON s.id = c.snapshot_id
  UNION ALL
  SELECT
    t.id,
    t.entity_id,
    t.schema_key,
    t.schema_version,
    t.file_id,
    t.plugin_key,
    json(t.metadata) AS metadata,
    t.created_at,
    json(t.snapshot_content) AS snapshot_content
  FROM lix_internal_transaction_state AS t
  WHERE t.untracked = 0) AS change
  WHERE change.id = lix_internal_state_vtable.change_id) AS metadata
  FROM (
  WITH
    wanted_versions AS (
      SELECT '01920000-0000-7000-8000-000000000026' AS version_id
    )
  SELECT
    w."entity_id" AS "entity_id",
    w."schema_key" AS "schema_key",
    w."file_id" AS "file_id",
    w."plugin_key" AS "plugin_key",
    w."snapshot_content" AS "snapshot_content",
    w."schema_version" AS "schema_version",
    w."version_id" AS "version_id",
    w."created_at" AS "created_at",
    w."updated_at" AS "updated_at",
    w."inherited_from_version_id" AS "inherited_from_version_id",
    w."change_id" AS "change_id",
    w."untracked" AS "untracked",
    w."commit_id" AS "commit_id",
    w."metadata" AS "metadata",
    COALESCE(ws_dst.writer_key, ws_src.writer_key, w.writer_key) AS "writer_key"
  FROM (
    SELECT
      c.entity_id AS entity_id,
      c.schema_key AS schema_key,
      c.file_id AS file_id,
      c.plugin_key AS plugin_key,
      c.snapshot_content AS snapshot_content,
      c.schema_version AS schema_version,
      c.version_id AS version_id,
      c.created_at AS created_at,
      c.updated_at AS updated_at,
      c.inherited_from_version_id AS inherited_from_version_id,
      c.change_id AS change_id,
      c.untracked AS untracked,
      c.commit_id AS commit_id,
      c.metadata AS metadata,
      c.writer_key AS writer_key,
      c.priority AS priority,
      ROW_NUMBER() OVER (
              PARTITION BY c.file_id, c.schema_key, c.entity_id, c.version_id
              ORDER BY c.priority, c.created_at DESC, c.file_id, c.schema_key, c.entity_id, c.version_id, c.change_id
            ) AS rn
    FROM (
        SELECT
          unt.entity_id AS entity_id,
          unt.schema_key AS schema_key,
          unt.file_id AS file_id,
          unt.plugin_key AS plugin_key,
          json(unt.snapshot_content) AS snapshot_content,
          unt.schema_version AS schema_version,
          unt.version_id AS version_id,
          unt.created_at AS created_at,
          unt.updated_at AS updated_at,
          NULL AS inherited_from_version_id,
          'untracked' AS change_id,
          1 AS untracked,
          'untracked' AS commit_id,
          NULL AS metadata,
          NULL AS writer_key,
          2 AS priority
        FROM lix_internal_state_all_untracked unt
        JOIN wanted_versions wv_unt ON wv_unt.version_id = unt.version_id

            UNION ALL

        		SELECT
            cache.entity_id AS entity_id,
            cache.schema_key AS schema_key,
            cache.file_id AS file_id,
            cache.plugin_key AS plugin_key,
            json(cache.snapshot_content) AS snapshot_content,
            cache.schema_version AS schema_version,
            cache.version_id AS version_id,
            cache.created_at AS created_at,
            cache.updated_at AS updated_at,
            cache.inherited_from_version_id AS inherited_from_version_id,
            cache.change_id AS change_id,
            0 AS untracked,
            cache.commit_id AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            3 AS priority
        		FROM (SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_descriptor"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_stored_schema"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_key_value"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_active_account"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit_edge"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_tip"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set_element"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_label"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_bench_diff_entity") cache
        		JOIN wanted_versions wv_cache ON wv_cache.version_id = cache.version_id

            UNION ALL

        		SELECT
            cache.entity_id AS entity_id,
            cache.schema_key AS schema_key,
            cache.file_id AS file_id,
            cache.plugin_key AS plugin_key,
            json(cache.snapshot_content) AS snapshot_content,
            cache.schema_version AS schema_version,
            vi.version_id AS version_id,
            cache.created_at AS created_at,
            cache.updated_at AS updated_at,
            cache.version_id AS inherited_from_version_id,
            cache.change_id AS change_id,
            0 AS untracked,
            cache.commit_id AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            4 AS priority
        		FROM (
        SELECT '01920000-0000-7000-8000-000000000026' AS version_id, 'global' AS ancestor_version_id
        ) AS vi
        		JOIN wanted_versions wv_vi ON wv_vi.version_id = vi.version_id
        		JOIN (SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_descriptor"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_stored_schema"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_key_value"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_active_account"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit_edge"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_tip"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set_element"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_label"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_bench_diff_entity") cache ON cache.version_id = vi.ancestor_version_id
        		WHERE cache.is_tombstone = 0
        		  AND cache.snapshot_content IS NOT NULL

            UNION ALL

        		SELECT
            unt.entity_id AS entity_id,
            unt.schema_key AS schema_key,
            unt.file_id AS file_id,
            unt.plugin_key AS plugin_key,
            json(unt.snapshot_content) AS snapshot_content,
            unt.schema_version AS schema_version,
            vi.version_id AS version_id,
            unt.created_at AS created_at,
            unt.updated_at AS updated_at,
            unt.version_id AS inherited_from_version_id,
            'untracked' AS change_id,
            1 AS untracked,
            'untracked' AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            5 AS priority
        		FROM (
        SELECT '01920000-0000-7000-8000-000000000026' AS version_id, 'global' AS ancestor_version_id
        ) AS vi
        		JOIN wanted_versions wv_vi ON wv_vi.version_id = vi.version_id
        		JOIN lix_internal_state_all_untracked unt ON unt.version_id = vi.ancestor_version_id
        		WHERE unt.is_tombstone = 0
        		  AND unt.snapshot_content IS NOT NULL
    ) AS c
  ) AS w

  LEFT JOIN lix_internal_state_writer ws_dst ON
    ws_dst.file_id = w.file_id AND
    ws_dst.entity_id = w.entity_id AND
    ws_dst.schema_key = w.schema_key AND
    ws_dst.version_id = w.version_id
  LEFT JOIN lix_internal_state_writer ws_src ON
    ws_src.file_id = w.file_id AND
    ws_src.entity_id = w.entity_id AND
    ws_src.schema_key = w.schema_key AND
    ws_src.version_id = w.inherited_from_version_id

  LEFT JOIN lix_internal_change chc ON chc.id = w.change_id

  WHERE w.rn = 1
  ) AS "lix_internal_state_vtable") AS state_with_tombstones
  WHERE version_id = '01920000-0000-7000-8000-000000000026'
),
t AS (
  SELECT
    entity_id,
    schema_key,
    file_id,
    change_id,
    commit_id,
    version_id
  FROM (SELECT
    entity_id,
    schema_key,
    file_id,
    version_id,
    plugin_key,
    snapshot_content,
    schema_version,
    created_at,
    updated_at,
    inherited_from_version_id,
    change_id,
    untracked,
    commit_id,
    writer_key,
    (SELECT json(metadata)
  FROM (SELECT
    c.id,
    c.entity_id,
    c.schema_key,
    c.schema_version,
    c.file_id,
    c.plugin_key,
    json(c.metadata) AS metadata,
    c.created_at,
    json(s.content) AS snapshot_content
  FROM lix_internal_change AS c LEFT JOIN lix_internal_snapshot AS s ON s.id = c.snapshot_id
  UNION ALL
  SELECT
    t.id,
    t.entity_id,
    t.schema_key,
    t.schema_version,
    t.file_id,
    t.plugin_key,
    json(t.metadata) AS metadata,
    t.created_at,
    json(t.snapshot_content) AS snapshot_content
  FROM lix_internal_transaction_state AS t
  WHERE t.untracked = 0) AS change
  WHERE change.id = lix_internal_state_vtable.change_id) AS metadata
  FROM (
  WITH
    wanted_versions AS (
      SELECT '01920000-0000-7000-8000-000000000044' AS version_id
    )
  SELECT
    w."entity_id" AS "entity_id",
    w."schema_key" AS "schema_key",
    w."file_id" AS "file_id",
    w."plugin_key" AS "plugin_key",
    w."snapshot_content" AS "snapshot_content",
    w."schema_version" AS "schema_version",
    w."version_id" AS "version_id",
    w."created_at" AS "created_at",
    w."updated_at" AS "updated_at",
    w."inherited_from_version_id" AS "inherited_from_version_id",
    w."change_id" AS "change_id",
    w."untracked" AS "untracked",
    w."commit_id" AS "commit_id",
    w."metadata" AS "metadata",
    COALESCE(ws_dst.writer_key, ws_src.writer_key, w.writer_key) AS "writer_key"
  FROM (
    SELECT
      c.entity_id AS entity_id,
      c.schema_key AS schema_key,
      c.file_id AS file_id,
      c.plugin_key AS plugin_key,
      c.snapshot_content AS snapshot_content,
      c.schema_version AS schema_version,
      c.version_id AS version_id,
      c.created_at AS created_at,
      c.updated_at AS updated_at,
      c.inherited_from_version_id AS inherited_from_version_id,
      c.change_id AS change_id,
      c.untracked AS untracked,
      c.commit_id AS commit_id,
      c.metadata AS metadata,
      c.writer_key AS writer_key,
      c.priority AS priority,
      ROW_NUMBER() OVER (
              PARTITION BY c.file_id, c.schema_key, c.entity_id, c.version_id
              ORDER BY c.priority, c.created_at DESC, c.file_id, c.schema_key, c.entity_id, c.version_id, c.change_id
            ) AS rn
    FROM (
        SELECT
          unt.entity_id AS entity_id,
          unt.schema_key AS schema_key,
          unt.file_id AS file_id,
          unt.plugin_key AS plugin_key,
          json(unt.snapshot_content) AS snapshot_content,
          unt.schema_version AS schema_version,
          unt.version_id AS version_id,
          unt.created_at AS created_at,
          unt.updated_at AS updated_at,
          NULL AS inherited_from_version_id,
          'untracked' AS change_id,
          1 AS untracked,
          'untracked' AS commit_id,
          NULL AS metadata,
          NULL AS writer_key,
          2 AS priority
        FROM lix_internal_state_all_untracked unt
        JOIN wanted_versions wv_unt ON wv_unt.version_id = unt.version_id

            UNION ALL

        		SELECT
            cache.entity_id AS entity_id,
            cache.schema_key AS schema_key,
            cache.file_id AS file_id,
            cache.plugin_key AS plugin_key,
            json(cache.snapshot_content) AS snapshot_content,
            cache.schema_version AS schema_version,
            cache.version_id AS version_id,
            cache.created_at AS created_at,
            cache.updated_at AS updated_at,
            cache.inherited_from_version_id AS inherited_from_version_id,
            cache.change_id AS change_id,
            0 AS untracked,
            cache.commit_id AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            3 AS priority
        		FROM (SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_descriptor"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_stored_schema"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_key_value"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_active_account"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit_edge"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_tip"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set_element"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_label"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_bench_diff_entity") cache
        		JOIN wanted_versions wv_cache ON wv_cache.version_id = cache.version_id

            UNION ALL

        		SELECT
            cache.entity_id AS entity_id,
            cache.schema_key AS schema_key,
            cache.file_id AS file_id,
            cache.plugin_key AS plugin_key,
            json(cache.snapshot_content) AS snapshot_content,
            cache.schema_version AS schema_version,
            vi.version_id AS version_id,
            cache.created_at AS created_at,
            cache.updated_at AS updated_at,
            cache.version_id AS inherited_from_version_id,
            cache.change_id AS change_id,
            0 AS untracked,
            cache.commit_id AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            4 AS priority
        		FROM (
        SELECT '01920000-0000-7000-8000-000000000044' AS version_id, 'global' AS ancestor_version_id
        ) AS vi
        		JOIN wanted_versions wv_vi ON wv_vi.version_id = vi.version_id
        		JOIN (SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_descriptor"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_stored_schema"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_key_value"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_active_account"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_commit_edge"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_version_tip"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_change_set_element"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_lix_label"
        UNION ALL
        SELECT
            "entity_id",
            "schema_key",
            "file_id",
            "plugin_key",
            "snapshot_content",
            "schema_version",
            "version_id",
            "created_at",
            "updated_at",
            "inherited_from_version_id",
            "change_id",
            "commit_id",
            "is_tombstone"
          FROM "lix_internal_state_cache_v1_bench_diff_entity") cache ON cache.version_id = vi.ancestor_version_id
        		WHERE cache.is_tombstone = 0
        		  AND cache.snapshot_content IS NOT NULL

            UNION ALL

        		SELECT
            unt.entity_id AS entity_id,
            unt.schema_key AS schema_key,
            unt.file_id AS file_id,
            unt.plugin_key AS plugin_key,
            json(unt.snapshot_content) AS snapshot_content,
            unt.schema_version AS schema_version,
            vi.version_id AS version_id,
            unt.created_at AS created_at,
            unt.updated_at AS updated_at,
            unt.version_id AS inherited_from_version_id,
            'untracked' AS change_id,
            1 AS untracked,
            'untracked' AS commit_id,
            NULL AS metadata,
            NULL AS writer_key,
            5 AS priority
        		FROM (
        SELECT '01920000-0000-7000-8000-000000000044' AS version_id, 'global' AS ancestor_version_id
        ) AS vi
        		JOIN wanted_versions wv_vi ON wv_vi.version_id = vi.version_id
        		JOIN lix_internal_state_all_untracked unt ON unt.version_id = vi.ancestor_version_id
        		WHERE unt.is_tombstone = 0
        		  AND unt.snapshot_content IS NOT NULL
    ) AS c
  ) AS w

  LEFT JOIN lix_internal_state_writer ws_dst ON
    ws_dst.file_id = w.file_id AND
    ws_dst.entity_id = w.entity_id AND
    ws_dst.schema_key = w.schema_key AND
    ws_dst.version_id = w.version_id
  LEFT JOIN lix_internal_state_writer ws_src ON
    ws_src.file_id = w.file_id AND
    ws_src.entity_id = w.entity_id AND
    ws_src.schema_key = w.schema_key AND
    ws_src.version_id = w.inherited_from_version_id

  LEFT JOIN lix_internal_change chc ON chc.id = w.change_id

  WHERE w.rn = 1
  ) AS "lix_internal_state_vtable"
  WHERE snapshot_content IS NOT NULL) AS state_by_version
  WHERE version_id = '01920000-0000-7000-8000-000000000044'
),
joined AS (
  SELECT
    COALESCE(s.entity_id, t.entity_id) AS entity_id,
    COALESCE(s.schema_key, t.schema_key) AS schema_key,
    COALESCE(s.file_id, t.file_id) AS file_id,
    t.version_id AS before_version_id,
    t.change_id AS before_change_id,
    t.commit_id AS before_commit_id,
    s.version_id AS after_version_id,
    s.change_id AS after_change_id,
    s.commit_id AS after_commit_id,
    CASE WHEN s.snapshot_content IS NULL THEN 'removed' WHEN t.change_id IS NULL AND s.snapshot_content IS NOT NULL THEN 'added' WHEN t.change_id IS NOT NULL AND s.snapshot_content IS NOT NULL AND s.change_id != t.change_id THEN 'modified' ELSE 'unchanged' END AS status
  FROM s LEFT JOIN t ON t.entity_id = s.entity_id AND t.schema_key = s.schema_key AND t.file_id = s.file_id
  UNION ALL
  SELECT
    COALESCE(s.entity_id, t.entity_id) AS entity_id,
    COALESCE(s.schema_key, t.schema_key) AS schema_key,
    COALESCE(s.file_id, t.file_id) AS file_id,
    t.version_id AS before_version_id,
    t.change_id AS before_change_id,
    t.commit_id AS before_commit_id,
    t.version_id AS after_version_id,
    t.change_id AS after_change_id,
    t.commit_id AS after_commit_id,
    CASE WHEN s.change_id IS NULL AND t.change_id IS NOT NULL THEN 'unchanged' ELSE 'unchanged' END AS status
  FROM t LEFT JOIN s ON s.entity_id = t.entity_id AND s.schema_key = t.schema_key AND s.file_id = t.file_id
  WHERE s.change_id IS NULL
)
SELECT *
FROM joined) AS "diff"

Parameters: (none)

Plan:

  • id=1, parent=0, notused=0, detail=COMPOUND QUERY

  • id=2, parent=1, notused=0, detail=LEFT-MOST SUBQUERY

  • id=4, parent=2, notused=0, detail=CO-ROUTINE w

  • id=7, parent=4, notused=0, detail=CO-ROUTINE (subquery-78)

  • id=9, parent=7, notused=0, detail=CO-ROUTINE c

  • id=10, parent=9, notused=0, detail=COMPOUND QUERY

  • id=11, parent=10, notused=0, detail=LEFT-MOST SUBQUERY

  • id=14, parent=11, notused=0, detail=MATERIALIZE wanted_versions

  • id=16, parent=14, notused=0, detail=SCAN CONSTANT ROW

  • id=26, parent=11, notused=16, detail=SCAN wv_unt

  • id=32, parent=11, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=57, parent=10, notused=0, detail=UNION ALL

  • id=58, parent=57, notused=0, detail=COMPOUND QUERY

  • id=59, parent=58, notused=0, detail=LEFT-MOST SUBQUERY

  • id=64, parent=59, notused=216, detail=SCAN wv_cache

  • id=70, parent=59, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=98, parent=58, notused=0, detail=UNION ALL

  • id=103, parent=98, notused=216, detail=SCAN wv_cache

  • id=109, parent=98, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_pk_version_id_json_extract_snapsho_json_extract_snapsho_r7zrf9 (version_id=?)

  • id=137, parent=58, notused=0, detail=UNION ALL

  • id=142, parent=137, notused=216, detail=SCAN wv_cache

  • id=148, parent=137, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=176, parent=58, notused=0, detail=UNION ALL

  • id=181, parent=176, notused=216, detail=SCAN wv_cache

  • id=187, parent=176, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=215, parent=58, notused=0, detail=UNION ALL

  • id=220, parent=215, notused=216, detail=SCAN wv_cache

  • id=226, parent=215, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=254, parent=58, notused=0, detail=UNION ALL

  • id=259, parent=254, notused=216, detail=SCAN wv_cache

  • id=265, parent=254, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=293, parent=58, notused=0, detail=UNION ALL

  • id=298, parent=293, notused=216, detail=SCAN wv_cache

  • id=304, parent=293, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_unique_version_id_json_extract_snapsho_c3jqlx (version_id=?)

  • id=332, parent=58, notused=0, detail=UNION ALL

  • id=337, parent=332, notused=216, detail=SCAN wv_cache

  • id=343, parent=332, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=371, parent=58, notused=0, detail=UNION ALL

  • id=376, parent=371, notused=216, detail=SCAN wv_cache

  • id=382, parent=371, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=410, parent=58, notused=0, detail=UNION ALL

  • id=415, parent=410, notused=216, detail=SCAN wv_cache

  • id=421, parent=410, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=449, parent=58, notused=0, detail=UNION ALL

  • id=454, parent=449, notused=216, detail=SCAN wv_cache

  • id=460, parent=449, notused=62, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_vfe (version_id=?)

  • id=488, parent=58, notused=0, detail=UNION ALL

  • id=489, parent=488, notused=0, detail=COMPOUND QUERY

  • id=490, parent=489, notused=0, detail=LEFT-MOST SUBQUERY

  • id=492, parent=490, notused=0, detail=CO-ROUTINE vi

  • id=493, parent=492, notused=0, detail=SCAN CONSTANT ROW

  • id=503, parent=490, notused=16, detail=SCAN vi

  • id=508, parent=490, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe (version_id=?)

  • id=518, parent=490, notused=216, detail=SCAN wv_vi

  • id=544, parent=489, notused=0, detail=UNION ALL

  • id=546, parent=544, notused=0, detail=CO-ROUTINE vi

  • id=547, parent=546, notused=0, detail=SCAN CONSTANT ROW

  • id=557, parent=544, notused=16, detail=SCAN vi

  • id=562, parent=544, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_live_vfe (version_id=?)

  • id=572, parent=544, notused=216, detail=SCAN wv_vi

  • id=598, parent=489, notused=0, detail=UNION ALL

  • id=600, parent=598, notused=0, detail=CO-ROUTINE vi

  • id=601, parent=600, notused=0, detail=SCAN CONSTANT ROW

  • id=611, parent=598, notused=16, detail=SCAN vi

  • id=616, parent=598, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe (version_id=?)

  • id=626, parent=598, notused=216, detail=SCAN wv_vi

  • id=652, parent=489, notused=0, detail=UNION ALL

  • id=654, parent=652, notused=0, detail=CO-ROUTINE vi

  • id=655, parent=654, notused=0, detail=SCAN CONSTANT ROW

  • id=665, parent=652, notused=16, detail=SCAN vi

  • id=670, parent=652, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)

  • id=680, parent=652, notused=216, detail=SCAN wv_vi

  • id=706, parent=489, notused=0, detail=UNION ALL

  • id=708, parent=706, notused=0, detail=CO-ROUTINE vi

  • id=709, parent=708, notused=0, detail=SCAN CONSTANT ROW

  • id=719, parent=706, notused=16, detail=SCAN vi

  • id=724, parent=706, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_live_vfe (version_id=?)

  • id=734, parent=706, notused=216, detail=SCAN wv_vi

  • id=760, parent=489, notused=0, detail=UNION ALL

  • id=762, parent=760, notused=0, detail=CO-ROUTINE vi

  • id=763, parent=762, notused=0, detail=SCAN CONSTANT ROW

  • id=773, parent=760, notused=16, detail=SCAN vi

  • id=778, parent=760, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_live_vfe (version_id=?)

  • id=788, parent=760, notused=216, detail=SCAN wv_vi

  • id=814, parent=489, notused=0, detail=UNION ALL

  • id=816, parent=814, notused=0, detail=CO-ROUTINE vi

  • id=817, parent=816, notused=0, detail=SCAN CONSTANT ROW

  • id=827, parent=814, notused=16, detail=SCAN vi

  • id=832, parent=814, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_live_vfe (version_id=?)

  • id=842, parent=814, notused=216, detail=SCAN wv_vi

  • id=868, parent=489, notused=0, detail=UNION ALL

  • id=870, parent=868, notused=0, detail=CO-ROUTINE vi

  • id=871, parent=870, notused=0, detail=SCAN CONSTANT ROW

  • id=881, parent=868, notused=16, detail=SCAN vi

  • id=886, parent=868, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_live_vfe (version_id=?)

  • id=896, parent=868, notused=216, detail=SCAN wv_vi

  • id=922, parent=489, notused=0, detail=UNION ALL

  • id=924, parent=922, notused=0, detail=CO-ROUTINE vi

  • id=925, parent=924, notused=0, detail=SCAN CONSTANT ROW

  • id=935, parent=922, notused=16, detail=SCAN vi

  • id=940, parent=922, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_live_vfe (version_id=?)

  • id=950, parent=922, notused=216, detail=SCAN wv_vi

  • id=976, parent=489, notused=0, detail=UNION ALL

  • id=978, parent=976, notused=0, detail=CO-ROUTINE vi

  • id=979, parent=978, notused=0, detail=SCAN CONSTANT ROW

  • id=989, parent=976, notused=16, detail=SCAN vi

  • id=994, parent=976, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)

  • id=1004, parent=976, notused=216, detail=SCAN wv_vi

  • id=1030, parent=489, notused=0, detail=UNION ALL

  • id=1032, parent=1030, notused=0, detail=CO-ROUTINE vi

  • id=1033, parent=1032, notused=0, detail=SCAN CONSTANT ROW

  • id=1043, parent=1030, notused=16, detail=SCAN vi

  • id=1048, parent=1030, notused=24, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_live_vfe (version_id=?)

  • id=1058, parent=1030, notused=216, detail=SCAN wv_vi

  • id=1084, parent=489, notused=0, detail=UNION ALL

  • id=1086, parent=1084, notused=0, detail=CO-ROUTINE vi

  • id=1087, parent=1086, notused=0, detail=SCAN CONSTANT ROW

  • id=1097, parent=1084, notused=16, detail=SCAN vi

  • id=1102, parent=1084, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=1115, parent=1084, notused=0, detail=BLOOM FILTER ON wv_vi (version_id=?)

  • id=1127, parent=1084, notused=53, detail=SEARCH wv_vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)

  • id=1156, parent=58, notused=263, detail=SCAN c

  • id=1195, parent=58, notused=0, detail=USE TEMP B-TREE FOR ORDER BY

  • id=1235, parent=57, notused=243, detail=SCAN (subquery-78)

  • id=1319, parent=10, notused=0, detail=MATERIALIZE lix_internal_state_vtable

  • id=1321, parent=1319, notused=0, detail=CO-ROUTINE w

  • id=1324, parent=1321, notused=0, detail=CO-ROUTINE (subquery-99)

  • id=1326, parent=1324, notused=0, detail=CO-ROUTINE c

  • id=1327, parent=1326, notused=0, detail=COMPOUND QUERY

  • id=1328, parent=1327, notused=0, detail=LEFT-MOST SUBQUERY

  • id=1331, parent=1328, notused=0, detail=MATERIALIZE wanted_versions

  • id=1333, parent=1331, notused=0, detail=SCAN CONSTANT ROW

  • id=1343, parent=1328, notused=16, detail=SCAN wv_unt

  • id=1349, parent=1328, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=1374, parent=1327, notused=0, detail=UNION ALL

  • id=1375, parent=1374, notused=0, detail=COMPOUND QUERY

  • id=1376, parent=1375, notused=0, detail=LEFT-MOST SUBQUERY

  • id=1381, parent=1376, notused=216, detail=SCAN wv_cache

  • id=1387, parent=1376, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=1415, parent=1375, notused=0, detail=UNION ALL

  • id=1420, parent=1415, notused=216, detail=SCAN wv_cache

  • id=1426, parent=1415, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_pk_version_id_json_extract_snapsho_json_extract_snapsho_r7zrf9 (version_id=?)

  • id=1454, parent=1375, notused=0, detail=UNION ALL

  • id=1459, parent=1454, notused=216, detail=SCAN wv_cache

  • id=1465, parent=1454, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=1493, parent=1375, notused=0, detail=UNION ALL

  • id=1498, parent=1493, notused=216, detail=SCAN wv_cache

  • id=1504, parent=1493, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=1532, parent=1375, notused=0, detail=UNION ALL

  • id=1537, parent=1532, notused=216, detail=SCAN wv_cache

  • id=1543, parent=1532, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=1571, parent=1375, notused=0, detail=UNION ALL

  • id=1576, parent=1571, notused=216, detail=SCAN wv_cache

  • id=1582, parent=1571, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=1610, parent=1375, notused=0, detail=UNION ALL

  • id=1615, parent=1610, notused=216, detail=SCAN wv_cache

  • id=1621, parent=1610, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_unique_version_id_json_extract_snapsho_c3jqlx (version_id=?)

  • id=1649, parent=1375, notused=0, detail=UNION ALL

  • id=1654, parent=1649, notused=216, detail=SCAN wv_cache

  • id=1660, parent=1649, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=1688, parent=1375, notused=0, detail=UNION ALL

  • id=1693, parent=1688, notused=216, detail=SCAN wv_cache

  • id=1699, parent=1688, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=1727, parent=1375, notused=0, detail=UNION ALL

  • id=1732, parent=1727, notused=216, detail=SCAN wv_cache

  • id=1738, parent=1727, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=1766, parent=1375, notused=0, detail=UNION ALL

  • id=1771, parent=1766, notused=216, detail=SCAN wv_cache

  • id=1777, parent=1766, notused=62, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_vfe (version_id=?)

  • id=1805, parent=1375, notused=0, detail=UNION ALL

  • id=1806, parent=1805, notused=0, detail=COMPOUND QUERY

  • id=1807, parent=1806, notused=0, detail=LEFT-MOST SUBQUERY

  • id=1809, parent=1807, notused=0, detail=CO-ROUTINE vi

  • id=1810, parent=1809, notused=0, detail=SCAN CONSTANT ROW

  • id=1820, parent=1807, notused=16, detail=SCAN vi

  • id=1825, parent=1807, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe (version_id=?)

  • id=1835, parent=1807, notused=216, detail=SCAN wv_vi

  • id=1861, parent=1806, notused=0, detail=UNION ALL

  • id=1863, parent=1861, notused=0, detail=CO-ROUTINE vi

  • id=1864, parent=1863, notused=0, detail=SCAN CONSTANT ROW

  • id=1874, parent=1861, notused=16, detail=SCAN vi

  • id=1879, parent=1861, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_live_vfe (version_id=?)

  • id=1889, parent=1861, notused=216, detail=SCAN wv_vi

  • id=1915, parent=1806, notused=0, detail=UNION ALL

  • id=1917, parent=1915, notused=0, detail=CO-ROUTINE vi

  • id=1918, parent=1917, notused=0, detail=SCAN CONSTANT ROW

  • id=1928, parent=1915, notused=16, detail=SCAN vi

  • id=1933, parent=1915, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe (version_id=?)

  • id=1943, parent=1915, notused=216, detail=SCAN wv_vi

  • id=1969, parent=1806, notused=0, detail=UNION ALL

  • id=1971, parent=1969, notused=0, detail=CO-ROUTINE vi

  • id=1972, parent=1971, notused=0, detail=SCAN CONSTANT ROW

  • id=1982, parent=1969, notused=16, detail=SCAN vi

  • id=1987, parent=1969, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)

  • id=1997, parent=1969, notused=216, detail=SCAN wv_vi

  • id=2023, parent=1806, notused=0, detail=UNION ALL

  • id=2025, parent=2023, notused=0, detail=CO-ROUTINE vi

  • id=2026, parent=2025, notused=0, detail=SCAN CONSTANT ROW

  • id=2036, parent=2023, notused=16, detail=SCAN vi

  • id=2041, parent=2023, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_live_vfe (version_id=?)

  • id=2051, parent=2023, notused=216, detail=SCAN wv_vi

  • id=2077, parent=1806, notused=0, detail=UNION ALL

  • id=2079, parent=2077, notused=0, detail=CO-ROUTINE vi

  • id=2080, parent=2079, notused=0, detail=SCAN CONSTANT ROW

  • id=2090, parent=2077, notused=16, detail=SCAN vi

  • id=2095, parent=2077, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_live_vfe (version_id=?)

  • id=2105, parent=2077, notused=216, detail=SCAN wv_vi

  • id=2131, parent=1806, notused=0, detail=UNION ALL

  • id=2133, parent=2131, notused=0, detail=CO-ROUTINE vi

  • id=2134, parent=2133, notused=0, detail=SCAN CONSTANT ROW

  • id=2144, parent=2131, notused=16, detail=SCAN vi

  • id=2149, parent=2131, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_live_vfe (version_id=?)

  • id=2159, parent=2131, notused=216, detail=SCAN wv_vi

  • id=2185, parent=1806, notused=0, detail=UNION ALL

  • id=2187, parent=2185, notused=0, detail=CO-ROUTINE vi

  • id=2188, parent=2187, notused=0, detail=SCAN CONSTANT ROW

  • id=2198, parent=2185, notused=16, detail=SCAN vi

  • id=2203, parent=2185, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_live_vfe (version_id=?)

  • id=2213, parent=2185, notused=216, detail=SCAN wv_vi

  • id=2239, parent=1806, notused=0, detail=UNION ALL

  • id=2241, parent=2239, notused=0, detail=CO-ROUTINE vi

  • id=2242, parent=2241, notused=0, detail=SCAN CONSTANT ROW

  • id=2252, parent=2239, notused=16, detail=SCAN vi

  • id=2257, parent=2239, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_live_vfe (version_id=?)

  • id=2267, parent=2239, notused=216, detail=SCAN wv_vi

  • id=2293, parent=1806, notused=0, detail=UNION ALL

  • id=2295, parent=2293, notused=0, detail=CO-ROUTINE vi

  • id=2296, parent=2295, notused=0, detail=SCAN CONSTANT ROW

  • id=2306, parent=2293, notused=16, detail=SCAN vi

  • id=2311, parent=2293, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)

  • id=2321, parent=2293, notused=216, detail=SCAN wv_vi

  • id=2347, parent=1806, notused=0, detail=UNION ALL

  • id=2349, parent=2347, notused=0, detail=CO-ROUTINE vi

  • id=2350, parent=2349, notused=0, detail=SCAN CONSTANT ROW

  • id=2360, parent=2347, notused=16, detail=SCAN vi

  • id=2365, parent=2347, notused=24, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_live_vfe (version_id=?)

  • id=2375, parent=2347, notused=216, detail=SCAN wv_vi

  • id=2401, parent=1806, notused=0, detail=UNION ALL

  • id=2403, parent=2401, notused=0, detail=CO-ROUTINE vi

  • id=2404, parent=2403, notused=0, detail=SCAN CONSTANT ROW

  • id=2414, parent=2401, notused=16, detail=SCAN vi

  • id=2419, parent=2401, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=2432, parent=2401, notused=0, detail=BLOOM FILTER ON wv_vi (version_id=?)

  • id=2444, parent=2401, notused=53, detail=SEARCH wv_vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)

  • id=2473, parent=1375, notused=263, detail=SCAN c

  • id=2512, parent=1375, notused=0, detail=USE TEMP B-TREE FOR ORDER BY

  • id=2552, parent=1374, notused=243, detail=SCAN (subquery-99)

  • id=2637, parent=1327, notused=243, detail=SCAN w

  • id=2646, parent=1327, notused=45, detail=SEARCH ws_dst USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN

  • id=2659, parent=1327, notused=45, detail=SEARCH ws_src USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN

  • id=2698, parent=1326, notused=243, detail=SCAN w

  • id=2709, parent=1326, notused=0, detail=BLOOM FILTER ON lix_internal_state_vtable (version_id=? AND entity_id=? AND schema_key=? AND file_id=?)

  • id=2737, parent=1326, notused=53, detail=SEARCH lix_internal_state_vtable USING AUTOMATIC PARTIAL COVERING INDEX (version_id=? AND entity_id=? AND schema_key=? AND file_id=?) LEFT-JOIN

  • id=2797, parent=1324, notused=0, detail=UNION ALL

  • id=2799, parent=2797, notused=0, detail=CO-ROUTINE w

  • id=2802, parent=2799, notused=0, detail=CO-ROUTINE (subquery-120)

  • id=2804, parent=2802, notused=0, detail=CO-ROUTINE c

  • id=2805, parent=2804, notused=0, detail=COMPOUND QUERY

  • id=2806, parent=2805, notused=0, detail=LEFT-MOST SUBQUERY

  • id=2809, parent=2806, notused=0, detail=MATERIALIZE wanted_versions

  • id=2811, parent=2809, notused=0, detail=SCAN CONSTANT ROW

  • id=2821, parent=2806, notused=16, detail=SCAN wv_unt

  • id=2827, parent=2806, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=2852, parent=2805, notused=0, detail=UNION ALL

  • id=2853, parent=2852, notused=0, detail=COMPOUND QUERY

  • id=2854, parent=2853, notused=0, detail=LEFT-MOST SUBQUERY

  • id=2859, parent=2854, notused=216, detail=SCAN wv_cache

  • id=2865, parent=2854, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=2893, parent=2853, notused=0, detail=UNION ALL

  • id=2898, parent=2893, notused=216, detail=SCAN wv_cache

  • id=2904, parent=2893, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_pk_version_id_json_extract_snapsho_json_extract_snapsho_r7zrf9 (version_id=?)

  • id=2932, parent=2853, notused=0, detail=UNION ALL

  • id=2937, parent=2932, notused=216, detail=SCAN wv_cache

  • id=2943, parent=2932, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=2971, parent=2853, notused=0, detail=UNION ALL

  • id=2976, parent=2971, notused=216, detail=SCAN wv_cache

  • id=2982, parent=2971, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=3010, parent=2853, notused=0, detail=UNION ALL

  • id=3015, parent=3010, notused=216, detail=SCAN wv_cache

  • id=3021, parent=3010, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=3049, parent=2853, notused=0, detail=UNION ALL

  • id=3054, parent=3049, notused=216, detail=SCAN wv_cache

  • id=3060, parent=3049, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=3088, parent=2853, notused=0, detail=UNION ALL

  • id=3093, parent=3088, notused=216, detail=SCAN wv_cache

  • id=3099, parent=3088, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_unique_version_id_json_extract_snapsho_c3jqlx (version_id=?)

  • id=3127, parent=2853, notused=0, detail=UNION ALL

  • id=3132, parent=3127, notused=216, detail=SCAN wv_cache

  • id=3138, parent=3127, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=3166, parent=2853, notused=0, detail=UNION ALL

  • id=3171, parent=3166, notused=216, detail=SCAN wv_cache

  • id=3177, parent=3166, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=3205, parent=2853, notused=0, detail=UNION ALL

  • id=3210, parent=3205, notused=216, detail=SCAN wv_cache

  • id=3216, parent=3205, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=3244, parent=2853, notused=0, detail=UNION ALL

  • id=3249, parent=3244, notused=216, detail=SCAN wv_cache

  • id=3255, parent=3244, notused=62, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_vfe (version_id=?)

  • id=3283, parent=2853, notused=0, detail=UNION ALL

  • id=3284, parent=3283, notused=0, detail=COMPOUND QUERY

  • id=3285, parent=3284, notused=0, detail=LEFT-MOST SUBQUERY

  • id=3287, parent=3285, notused=0, detail=CO-ROUTINE vi

  • id=3288, parent=3287, notused=0, detail=SCAN CONSTANT ROW

  • id=3298, parent=3285, notused=16, detail=SCAN vi

  • id=3303, parent=3285, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe (version_id=?)

  • id=3313, parent=3285, notused=216, detail=SCAN wv_vi

  • id=3339, parent=3284, notused=0, detail=UNION ALL

  • id=3341, parent=3339, notused=0, detail=CO-ROUTINE vi

  • id=3342, parent=3341, notused=0, detail=SCAN CONSTANT ROW

  • id=3352, parent=3339, notused=16, detail=SCAN vi

  • id=3357, parent=3339, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_live_vfe (version_id=?)

  • id=3367, parent=3339, notused=216, detail=SCAN wv_vi

  • id=3393, parent=3284, notused=0, detail=UNION ALL

  • id=3395, parent=3393, notused=0, detail=CO-ROUTINE vi

  • id=3396, parent=3395, notused=0, detail=SCAN CONSTANT ROW

  • id=3406, parent=3393, notused=16, detail=SCAN vi

  • id=3411, parent=3393, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe (version_id=?)

  • id=3421, parent=3393, notused=216, detail=SCAN wv_vi

  • id=3447, parent=3284, notused=0, detail=UNION ALL

  • id=3449, parent=3447, notused=0, detail=CO-ROUTINE vi

  • id=3450, parent=3449, notused=0, detail=SCAN CONSTANT ROW

  • id=3460, parent=3447, notused=16, detail=SCAN vi

  • id=3465, parent=3447, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)

  • id=3475, parent=3447, notused=216, detail=SCAN wv_vi

  • id=3501, parent=3284, notused=0, detail=UNION ALL

  • id=3503, parent=3501, notused=0, detail=CO-ROUTINE vi

  • id=3504, parent=3503, notused=0, detail=SCAN CONSTANT ROW

  • id=3514, parent=3501, notused=16, detail=SCAN vi

  • id=3519, parent=3501, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_live_vfe (version_id=?)

  • id=3529, parent=3501, notused=216, detail=SCAN wv_vi

  • id=3555, parent=3284, notused=0, detail=UNION ALL

  • id=3557, parent=3555, notused=0, detail=CO-ROUTINE vi

  • id=3558, parent=3557, notused=0, detail=SCAN CONSTANT ROW

  • id=3568, parent=3555, notused=16, detail=SCAN vi

  • id=3573, parent=3555, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_live_vfe (version_id=?)

  • id=3583, parent=3555, notused=216, detail=SCAN wv_vi

  • id=3609, parent=3284, notused=0, detail=UNION ALL

  • id=3611, parent=3609, notused=0, detail=CO-ROUTINE vi

  • id=3612, parent=3611, notused=0, detail=SCAN CONSTANT ROW

  • id=3622, parent=3609, notused=16, detail=SCAN vi

  • id=3627, parent=3609, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_live_vfe (version_id=?)

  • id=3637, parent=3609, notused=216, detail=SCAN wv_vi

  • id=3663, parent=3284, notused=0, detail=UNION ALL

  • id=3665, parent=3663, notused=0, detail=CO-ROUTINE vi

  • id=3666, parent=3665, notused=0, detail=SCAN CONSTANT ROW

  • id=3676, parent=3663, notused=16, detail=SCAN vi

  • id=3681, parent=3663, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_live_vfe (version_id=?)

  • id=3691, parent=3663, notused=216, detail=SCAN wv_vi

  • id=3717, parent=3284, notused=0, detail=UNION ALL

  • id=3719, parent=3717, notused=0, detail=CO-ROUTINE vi

  • id=3720, parent=3719, notused=0, detail=SCAN CONSTANT ROW

  • id=3730, parent=3717, notused=16, detail=SCAN vi

  • id=3735, parent=3717, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_live_vfe (version_id=?)

  • id=3745, parent=3717, notused=216, detail=SCAN wv_vi

  • id=3771, parent=3284, notused=0, detail=UNION ALL

  • id=3773, parent=3771, notused=0, detail=CO-ROUTINE vi

  • id=3774, parent=3773, notused=0, detail=SCAN CONSTANT ROW

  • id=3784, parent=3771, notused=16, detail=SCAN vi

  • id=3789, parent=3771, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)

  • id=3799, parent=3771, notused=216, detail=SCAN wv_vi

  • id=3825, parent=3284, notused=0, detail=UNION ALL

  • id=3827, parent=3825, notused=0, detail=CO-ROUTINE vi

  • id=3828, parent=3827, notused=0, detail=SCAN CONSTANT ROW

  • id=3838, parent=3825, notused=16, detail=SCAN vi

  • id=3843, parent=3825, notused=24, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_live_vfe (version_id=?)

  • id=3853, parent=3825, notused=216, detail=SCAN wv_vi

  • id=3879, parent=3284, notused=0, detail=UNION ALL

  • id=3881, parent=3879, notused=0, detail=CO-ROUTINE vi

  • id=3882, parent=3881, notused=0, detail=SCAN CONSTANT ROW

  • id=3892, parent=3879, notused=16, detail=SCAN vi

  • id=3897, parent=3879, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=3910, parent=3879, notused=0, detail=BLOOM FILTER ON wv_vi (version_id=?)

  • id=3922, parent=3879, notused=53, detail=SEARCH wv_vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)

  • id=3951, parent=2853, notused=263, detail=SCAN c

  • id=3990, parent=2853, notused=0, detail=USE TEMP B-TREE FOR ORDER BY

  • id=4030, parent=2852, notused=243, detail=SCAN (subquery-120)

  • id=4114, parent=2805, notused=0, detail=MATERIALIZE lix_internal_state_vtable

  • id=4116, parent=4114, notused=0, detail=CO-ROUTINE w

  • id=4119, parent=4116, notused=0, detail=CO-ROUTINE (subquery-141)

  • id=4121, parent=4119, notused=0, detail=CO-ROUTINE c

  • id=4122, parent=4121, notused=0, detail=COMPOUND QUERY

  • id=4123, parent=4122, notused=0, detail=LEFT-MOST SUBQUERY

  • id=4126, parent=4123, notused=0, detail=MATERIALIZE wanted_versions

  • id=4128, parent=4126, notused=0, detail=SCAN CONSTANT ROW

  • id=4138, parent=4123, notused=16, detail=SCAN wv_unt

  • id=4144, parent=4123, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=4169, parent=4122, notused=0, detail=UNION ALL

  • id=4170, parent=4169, notused=0, detail=COMPOUND QUERY

  • id=4171, parent=4170, notused=0, detail=LEFT-MOST SUBQUERY

  • id=4176, parent=4171, notused=216, detail=SCAN wv_cache

  • id=4182, parent=4171, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=4210, parent=4170, notused=0, detail=UNION ALL

  • id=4215, parent=4210, notused=216, detail=SCAN wv_cache

  • id=4221, parent=4210, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_pk_version_id_json_extract_snapsho_json_extract_snapsho_r7zrf9 (version_id=?)

  • id=4249, parent=4170, notused=0, detail=UNION ALL

  • id=4254, parent=4249, notused=216, detail=SCAN wv_cache

  • id=4260, parent=4249, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=4288, parent=4170, notused=0, detail=UNION ALL

  • id=4293, parent=4288, notused=216, detail=SCAN wv_cache

  • id=4299, parent=4288, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=4327, parent=4170, notused=0, detail=UNION ALL

  • id=4332, parent=4327, notused=216, detail=SCAN wv_cache

  • id=4338, parent=4327, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=4366, parent=4170, notused=0, detail=UNION ALL

  • id=4371, parent=4366, notused=216, detail=SCAN wv_cache

  • id=4377, parent=4366, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=4405, parent=4170, notused=0, detail=UNION ALL

  • id=4410, parent=4405, notused=216, detail=SCAN wv_cache

  • id=4416, parent=4405, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_unique_version_id_json_extract_snapsho_c3jqlx (version_id=?)

  • id=4444, parent=4170, notused=0, detail=UNION ALL

  • id=4449, parent=4444, notused=216, detail=SCAN wv_cache

  • id=4455, parent=4444, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=4483, parent=4170, notused=0, detail=UNION ALL

  • id=4488, parent=4483, notused=216, detail=SCAN wv_cache

  • id=4494, parent=4483, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_foreign_version_id_inherited_from_versi_json_extract_snapsho_79rox8 (version_id=?)

  • id=4522, parent=4170, notused=0, detail=UNION ALL

  • id=4527, parent=4522, notused=216, detail=SCAN wv_cache

  • id=4533, parent=4522, notused=62, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_pk_version_id_json_extract_snapsho_4h2kdb (version_id=?)

  • id=4561, parent=4170, notused=0, detail=UNION ALL

  • id=4566, parent=4561, notused=216, detail=SCAN wv_cache

  • id=4572, parent=4561, notused=62, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_vfe (version_id=?)

  • id=4600, parent=4170, notused=0, detail=UNION ALL

  • id=4601, parent=4600, notused=0, detail=COMPOUND QUERY

  • id=4602, parent=4601, notused=0, detail=LEFT-MOST SUBQUERY

  • id=4604, parent=4602, notused=0, detail=CO-ROUTINE vi

  • id=4605, parent=4604, notused=0, detail=SCAN CONSTANT ROW

  • id=4615, parent=4602, notused=16, detail=SCAN vi

  • id=4620, parent=4602, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe (version_id=?)

  • id=4630, parent=4602, notused=216, detail=SCAN wv_vi

  • id=4656, parent=4601, notused=0, detail=UNION ALL

  • id=4658, parent=4656, notused=0, detail=CO-ROUTINE vi

  • id=4659, parent=4658, notused=0, detail=SCAN CONSTANT ROW

  • id=4669, parent=4656, notused=16, detail=SCAN vi

  • id=4674, parent=4656, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_stored_schema USING INDEX idx_lix_internal_state_cache_v1_lix_stored_schema_live_vfe (version_id=?)

  • id=4684, parent=4656, notused=216, detail=SCAN wv_vi

  • id=4710, parent=4601, notused=0, detail=UNION ALL

  • id=4712, parent=4710, notused=0, detail=CO-ROUTINE vi

  • id=4713, parent=4712, notused=0, detail=SCAN CONSTANT ROW

  • id=4723, parent=4710, notused=16, detail=SCAN vi

  • id=4728, parent=4710, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe (version_id=?)

  • id=4738, parent=4710, notused=216, detail=SCAN wv_vi

  • id=4764, parent=4601, notused=0, detail=UNION ALL

  • id=4766, parent=4764, notused=0, detail=CO-ROUTINE vi

  • id=4767, parent=4766, notused=0, detail=SCAN CONSTANT ROW

  • id=4777, parent=4764, notused=16, detail=SCAN vi

  • id=4782, parent=4764, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)

  • id=4792, parent=4764, notused=216, detail=SCAN wv_vi

  • id=4818, parent=4601, notused=0, detail=UNION ALL

  • id=4820, parent=4818, notused=0, detail=CO-ROUTINE vi

  • id=4821, parent=4820, notused=0, detail=SCAN CONSTANT ROW

  • id=4831, parent=4818, notused=16, detail=SCAN vi

  • id=4836, parent=4818, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit USING INDEX idx_lix_internal_state_cache_v1_lix_commit_live_vfe (version_id=?)

  • id=4846, parent=4818, notused=216, detail=SCAN wv_vi

  • id=4872, parent=4601, notused=0, detail=UNION ALL

  • id=4874, parent=4872, notused=0, detail=CO-ROUTINE vi

  • id=4875, parent=4874, notused=0, detail=SCAN CONSTANT ROW

  • id=4885, parent=4872, notused=16, detail=SCAN vi

  • id=4890, parent=4872, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_commit_edge USING INDEX idx_lix_internal_state_cache_v1_lix_commit_edge_live_vfe (version_id=?)

  • id=4900, parent=4872, notused=216, detail=SCAN wv_vi

  • id=4926, parent=4601, notused=0, detail=UNION ALL

  • id=4928, parent=4926, notused=0, detail=CO-ROUTINE vi

  • id=4929, parent=4928, notused=0, detail=SCAN CONSTANT ROW

  • id=4939, parent=4926, notused=16, detail=SCAN vi

  • id=4944, parent=4926, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_version_tip USING INDEX idx_lix_internal_state_cache_v1_lix_version_tip_live_vfe (version_id=?)

  • id=4954, parent=4926, notused=216, detail=SCAN wv_vi

  • id=4980, parent=4601, notused=0, detail=UNION ALL

  • id=4982, parent=4980, notused=0, detail=CO-ROUTINE vi

  • id=4983, parent=4982, notused=0, detail=SCAN CONSTANT ROW

  • id=4993, parent=4980, notused=16, detail=SCAN vi

  • id=4998, parent=4980, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_live_vfe (version_id=?)

  • id=5008, parent=4980, notused=216, detail=SCAN wv_vi

  • id=5034, parent=4601, notused=0, detail=UNION ALL

  • id=5036, parent=5034, notused=0, detail=CO-ROUTINE vi

  • id=5037, parent=5036, notused=0, detail=SCAN CONSTANT ROW

  • id=5047, parent=5034, notused=16, detail=SCAN vi

  • id=5052, parent=5034, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_change_set_element USING INDEX idx_lix_internal_state_cache_v1_lix_change_set_element_live_vfe (version_id=?)

  • id=5062, parent=5034, notused=216, detail=SCAN wv_vi

  • id=5088, parent=4601, notused=0, detail=UNION ALL

  • id=5090, parent=5088, notused=0, detail=CO-ROUTINE vi

  • id=5091, parent=5090, notused=0, detail=SCAN CONSTANT ROW

  • id=5101, parent=5088, notused=16, detail=SCAN vi

  • id=5106, parent=5088, notused=27, detail=SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)

  • id=5116, parent=5088, notused=216, detail=SCAN wv_vi

  • id=5142, parent=4601, notused=0, detail=UNION ALL

  • id=5144, parent=5142, notused=0, detail=CO-ROUTINE vi

  • id=5145, parent=5144, notused=0, detail=SCAN CONSTANT ROW

  • id=5155, parent=5142, notused=16, detail=SCAN vi

  • id=5160, parent=5142, notused=24, detail=SEARCH lix_internal_state_cache_v1_bench_diff_entity USING INDEX idx_lix_internal_state_cache_v1_bench_diff_entity_live_vfe (version_id=?)

  • id=5170, parent=5142, notused=216, detail=SCAN wv_vi

  • id=5196, parent=4601, notused=0, detail=UNION ALL

  • id=5198, parent=5196, notused=0, detail=CO-ROUTINE vi

  • id=5199, parent=5198, notused=0, detail=SCAN CONSTANT ROW

  • id=5209, parent=5196, notused=16, detail=SCAN vi

  • id=5214, parent=5196, notused=61, detail=SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)

  • id=5227, parent=5196, notused=0, detail=BLOOM FILTER ON wv_vi (version_id=?)

  • id=5239, parent=5196, notused=53, detail=SEARCH wv_vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)

  • id=5268, parent=4170, notused=263, detail=SCAN c

  • id=5307, parent=4170, notused=0, detail=USE TEMP B-TREE FOR ORDER BY

  • id=5347, parent=4169, notused=243, detail=SCAN (subquery-141)

  • id=5432, parent=4122, notused=243, detail=SCAN w

  • id=5439, parent=4122, notused=45, detail=SEARCH ws_dst USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN

  • id=5452, parent=4122, notused=45, detail=SEARCH ws_src USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN

  • id=5491, parent=4121, notused=243, detail=SCAN w

  • id=5504, parent=4121, notused=0, detail=BLOOM FILTER ON lix_internal_state_vtable (version_id=? AND entity_id=? AND schema_key=? AND file_id=?)

  • id=5530, parent=4121, notused=53, detail=SEARCH lix_internal_state_vtable USING AUTOMATIC PARTIAL COVERING INDEX (version_id=? AND entity_id=? AND schema_key=? AND file_id=?) LEFT-JOIN

