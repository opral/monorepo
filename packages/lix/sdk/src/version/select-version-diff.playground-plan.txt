-- original SQL --
select * from (
WITH
  -- Source side should expose explicit deletions (tombstones)
  -- Use state_with_tombstones to include rows with NULL snapshot_content
  s AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id, snapshot_content
    FROM state_with_tombstones
    WHERE version_id = 'test_0000000032'
  ),
  t AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id
    FROM state_all
    WHERE version_id = 'test_0000000062'
  ),
  joined AS (
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      s.version_id AS after_version_id,
      s.change_id AS after_change_id,
      s.commit_id AS after_commit_id,
      CASE
        -- Explicit delete in source (tombstone takes precedence)
        WHEN s.snapshot_content IS NULL THEN 'removed'
        -- Added in source only (live row)
        WHEN t.change_id IS NULL AND s.snapshot_content IS NOT NULL THEN 'added'
        -- Both present and different (live row in source)
        WHEN t.change_id IS NOT NULL AND s.snapshot_content IS NOT NULL AND s.change_id != t.change_id THEN 'modified'
        -- Both present and same (live row in source)
        ELSE 'unchanged'
      END AS status
    FROM s
    LEFT JOIN t ON t.entity_id = s.entity_id AND t.schema_key = s.schema_key AND t.file_id = s.file_id
    UNION ALL
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      -- For target-only rows (no source contribution), mirror target values for after_*
      -- This represents entities that exist in target but were never in source
      t.version_id AS after_version_id,
      t.change_id AS after_change_id,
      t.commit_id AS after_commit_id,
      CASE
        -- Target-only: entity exists in target but never existed in source (no explicit delete)
        -- Treated as unchanged since source doesn't modify it
        WHEN s.change_id IS NULL AND t.change_id IS NOT NULL THEN 'unchanged'
        ELSE 'unchanged'
      END AS status
    FROM t
    LEFT JOIN s ON s.entity_id = t.entity_id AND s.schema_key = t.schema_key AND s.file_id = t.file_id
    WHERE s.change_id IS NULL
  )
SELECT *
FROM joined
    ) as "diff" where "diff"."status" != ?

-- expanded SQL --
select * from (
WITH
  -- Source side should expose explicit deletions (tombstones)
  -- Use state_with_tombstones to include rows with NULL snapshot_content
  s AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id, snapshot_content
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM lix_internal_state_vtable ) AS state_with_tombstones
    WHERE version_id = 'test_0000000032'
  ),
  t AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS state_all
    WHERE version_id = 'test_0000000062'
  ),
  joined AS (
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      s.version_id AS after_version_id,
      s.change_id AS after_change_id,
      s.commit_id AS after_commit_id,
      CASE
        -- Explicit delete in source (tombstone takes precedence)
        WHEN s.snapshot_content IS NULL THEN 'removed'
        -- Added in source only (live row)
        WHEN t.change_id IS NULL AND s.snapshot_content IS NOT NULL THEN 'added'
        -- Both present and different (live row in source)
        WHEN t.change_id IS NOT NULL AND s.snapshot_content IS NOT NULL AND s.change_id != t.change_id THEN 'modified'
        -- Both present and same (live row in source)
        ELSE 'unchanged'
      END AS status
    FROM s
    LEFT JOIN t ON t.entity_id = s.entity_id AND t.schema_key = s.schema_key AND t.file_id = s.file_id
    UNION ALL
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      -- For target-only rows (no source contribution), mirror target values for after_*
      -- This represents entities that exist in target but were never in source
      t.version_id AS after_version_id,
      t.change_id AS after_change_id,
      t.commit_id AS after_commit_id,
      CASE
        -- Target-only: entity exists in target but never existed in source (no explicit delete)
        -- Treated as unchanged since source doesn't modify it
        WHEN s.change_id IS NULL AND t.change_id IS NOT NULL THEN 'unchanged'
        ELSE 'unchanged'
      END AS status
    FROM t
    LEFT JOIN s ON s.entity_id = t.entity_id AND s.schema_key = t.schema_key AND s.file_id = t.file_id
    WHERE s.change_id IS NULL
  )
SELECT *
FROM joined
    ) as "diff" where "diff"."status" != ?

-- rewritten SQL --
WITH
-- hoisted_lix_internal_state_vtable_rewrite
lix_internal_state_vtable_rewritten AS (
  WITH RECURSIVE
    version_descriptor_base AS (
      SELECT
        json_extract(desc.snapshot_content, '$.id') AS version_id,
        json_extract(desc.snapshot_content, '$.inherits_from_version_id') AS inherits_from_version_id
      FROM lix_internal_state_cache_v1_lix_version_descriptor desc
    ),
      version_inheritance(version_id, ancestor_version_id) AS (
        SELECT
          vdb.version_id,
          vdb.inherits_from_version_id
        FROM version_descriptor_base vdb
        WHERE vdb.inherits_from_version_id IS NOT NULL

        UNION ALL

        SELECT
          vir.version_id,
          vdb.inherits_from_version_id
        FROM version_inheritance vir
        JOIN version_descriptor_base vdb ON vdb.version_id = vir.ancestor_version_id
        WHERE vdb.inherits_from_version_id IS NOT NULL
      ),
      version_parent AS (
        SELECT
          vdb.version_id,
          vdb.inherits_from_version_id AS parent_version_id
        FROM version_descriptor_base vdb
        WHERE vdb.inherits_from_version_id IS NOT NULL
      )
   ,
    candidates AS (
      SELECT
        'U' || '~' || lix_encode_pk_part(u.file_id) || '~' || lix_encode_pk_part(u.entity_id) || '~' || lix_encode_pk_part(u.version_id) AS _pk,
        u.entity_id,
        u.schema_key,
        u.file_id,
        u.plugin_key,
        json(u.snapshot_content) AS snapshot_content,
        u.schema_version,
        u.version_id AS src_version_id,
        u.version_id AS dst_version_id,
        u.created_at,
        u.updated_at,
        NULL AS inherited_from_version_id,
        'untracked' AS change_id,
        1 AS untracked,
        'untracked' AS commit_id,
        NULL AS metadata,
        2 AS priority
      FROM lix_internal_state_all_untracked u
      WHERE (
        (u.is_tombstone = 0 AND u.snapshot_content IS NOT NULL) OR
        (u.is_tombstone = 1 AND u.snapshot_content IS NULL)
      )

      UNION ALL

      SELECT
        'C' || '~' || lix_encode_pk_part(c.file_id) || '~' || lix_encode_pk_part(c.entity_id) || '~' || lix_encode_pk_part(c.version_id) AS _pk,
        c.entity_id,
        c.schema_key,
        c.file_id,
        c.plugin_key,
        json(c.snapshot_content) AS snapshot_content,
        c.schema_version,
        c.version_id AS src_version_id,
        c.version_id AS dst_version_id,
        c.created_at,
        c.updated_at,
        c.inherited_from_version_id,
        c.change_id,
        0 AS untracked,
        c.commit_id,
        NULL AS metadata,
        3 AS priority
      FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_descriptor
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_stored_schema
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_key_value
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_active_account
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit_edge
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_tip
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set_element
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_label
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_test_bench_diff_entity) c
      WHERE (
        (c.is_tombstone = 0 AND c.snapshot_content IS NOT NULL) OR
        (c.is_tombstone = 1 AND c.snapshot_content IS NULL)
      )

      UNION ALL

      SELECT
        'CI' || '~' || lix_encode_pk_part(isc.file_id) || '~' || lix_encode_pk_part(isc.entity_id) || '~' || lix_encode_pk_part(vi.version_id) AS _pk,
        isc.entity_id,
        isc.schema_key,
        isc.file_id,
        isc.plugin_key,
        json(isc.snapshot_content) AS snapshot_content,
        isc.schema_version,
        isc.version_id AS src_version_id,
        vi.version_id AS dst_version_id,
        isc.created_at,
        isc.updated_at,
        isc.version_id AS inherited_from_version_id,
        isc.change_id,
        0 AS untracked,
        isc.commit_id,
        NULL AS metadata,
        4 AS priority
      FROM version_inheritance vi
      JOIN (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_descriptor
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_stored_schema
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_key_value
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_active_account
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit_edge
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_tip
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set_element
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_label
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_test_bench_diff_entity) isc ON isc.version_id = vi.ancestor_version_id
      WHERE isc.is_tombstone = 0
        AND isc.snapshot_content IS NOT NULL

      UNION ALL

      SELECT
        'UI' || '~' || lix_encode_pk_part(unt.file_id) || '~' || lix_encode_pk_part(unt.entity_id) || '~' || lix_encode_pk_part(vi.version_id) AS _pk,
        unt.entity_id,
        unt.schema_key,
        unt.file_id,
        unt.plugin_key,
        json(unt.snapshot_content) AS snapshot_content,
        unt.schema_version,
        unt.version_id AS src_version_id,
        vi.version_id AS dst_version_id,
        unt.created_at,
        unt.updated_at,
        unt.version_id AS inherited_from_version_id,
        'untracked' AS change_id,
        1 AS untracked,
        'untracked' AS commit_id,
        NULL AS metadata,
        5 AS priority
      FROM version_inheritance vi
      JOIN lix_internal_state_all_untracked unt ON unt.version_id = vi.ancestor_version_id
      WHERE unt.is_tombstone = 0
        AND unt.snapshot_content IS NOT NULL
    ),
    ranked AS (
      SELECT
        c._pk,
        c.entity_id,
        c.schema_key,
        c.file_id,
        c.plugin_key,
        c.snapshot_content,
        c.schema_version,
        c.dst_version_id AS version_id,
        c.created_at,
        c.updated_at,
        c.inherited_from_version_id,
        c.change_id,
        c.untracked,
        c.commit_id,
        c.metadata,
        c.priority,
        ROW_NUMBER() OVER (
          PARTITION BY c.file_id, c.schema_key, c.entity_id, c.dst_version_id
          ORDER BY c.priority,
                   c.created_at DESC,
                   c._pk
        ) AS rn
      FROM candidates c

    )
  SELECT
    w._pk,
    w.entity_id,
    w.schema_key,
    w.file_id,
    w.plugin_key,
    w.snapshot_content,
    w.schema_version,
    w.version_id,
    w.created_at,
    w.updated_at,
    w.inherited_from_version_id,
    w.change_id,
    w.untracked,
    w.commit_id,
    COALESCE(w.metadata, json(chc.metadata)) AS metadata,
    COALESCE(ws_dst.writer_key, ws_src.writer_key) AS writer_key
  FROM ranked w
  LEFT JOIN lix_internal_state_writer ws_dst ON
    ws_dst.file_id = w.file_id AND
    ws_dst.entity_id = w.entity_id AND
    ws_dst.schema_key = w.schema_key AND
    ws_dst.version_id = w.version_id
  LEFT JOIN lix_internal_state_writer ws_src ON
    ws_src.file_id = w.file_id AND
    ws_src.entity_id = w.entity_id AND
    ws_src.schema_key = w.schema_key AND
    ws_src.version_id = COALESCE(w.inherited_from_version_id, w.version_id)
  LEFT JOIN lix_internal_change chc ON chc.id = w.change_id

  WHERE w.rn = 1

)
select * from (
WITH
  -- Source side should expose explicit deletions (tombstones)
  -- Use state_with_tombstones to include rows with NULL snapshot_content
  s AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id, snapshot_content
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, change_id, untracked, commit_id, metadata, writer_key FROM lix_internal_state_vtable_rewritten) AS lix_internal_state_vtable ) AS state_with_tombstones
    WHERE version_id = 'test_0000000032'
  ),
  t AS (
    SELECT entity_id, schema_key, file_id, change_id, commit_id, version_id
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, change_id, untracked, commit_id, metadata, writer_key FROM lix_internal_state_vtable_rewritten) AS lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS state_all
    WHERE version_id = 'test_0000000062'
  ),
  joined AS (
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      s.version_id AS after_version_id,
      s.change_id AS after_change_id,
      s.commit_id AS after_commit_id,
      CASE
        -- Explicit delete in source (tombstone takes precedence)
        WHEN s.snapshot_content IS NULL THEN 'removed'
        -- Added in source only (live row)
        WHEN t.change_id IS NULL AND s.snapshot_content IS NOT NULL THEN 'added'
        -- Both present and different (live row in source)
        WHEN t.change_id IS NOT NULL AND s.snapshot_content IS NOT NULL AND s.change_id != t.change_id THEN 'modified'
        -- Both present and same (live row in source)
        ELSE 'unchanged'
      END AS status
    FROM s
    LEFT JOIN t ON t.entity_id = s.entity_id AND t.schema_key = s.schema_key AND t.file_id = s.file_id
    UNION ALL
    SELECT
      COALESCE(s.entity_id, t.entity_id) AS entity_id,
      COALESCE(s.schema_key, t.schema_key) AS schema_key,
      COALESCE(s.file_id, t.file_id) AS file_id,
      t.version_id AS before_version_id,
      t.change_id AS before_change_id,
      t.commit_id AS before_commit_id,
      -- For target-only rows (no source contribution), mirror target values for after_*
      -- This represents entities that exist in target but were never in source
      t.version_id AS after_version_id,
      t.change_id AS after_change_id,
      t.commit_id AS after_commit_id,
      CASE
        -- Target-only: entity exists in target but never existed in source (no explicit delete)
        -- Treated as unchanged since source doesn't modify it
        WHEN s.change_id IS NULL AND t.change_id IS NOT NULL THEN 'unchanged'
        ELSE 'unchanged'
      END AS status
    FROM t
    LEFT JOIN s ON s.entity_id = t.entity_id AND s.schema_key = t.schema_key AND s.file_id = t.file_id
    WHERE s.change_id IS NULL
  )
SELECT *
FROM joined
    ) as "diff" where "diff"."status" != ?

-- plan --
[
  {
    "id": 1,
    "parent": 0,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 2,
    "parent": 1,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 4,
    "parent": 2,
    "notused": 0,
    "detail": "CO-ROUTINE ranked"
  },
  {
    "id": 7,
    "parent": 4,
    "notused": 0,
    "detail": "CO-ROUTINE (subquery-54)"
  },
  {
    "id": 9,
    "parent": 7,
    "notused": 0,
    "detail": "CO-ROUTINE candidates"
  },
  {
    "id": 10,
    "parent": 9,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 11,
    "parent": 10,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 14,
    "parent": 11,
    "notused": 61,
    "detail": "SEARCH u USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 57,
    "parent": 10,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 58,
    "parent": 57,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 59,
    "parent": 58,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 61,
    "parent": 59,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 103,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 105,
    "parent": 103,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 147,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 149,
    "parent": 147,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 191,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 195,
    "parent": 191,
    "notused": 0,
    "detail": "MULTI-INDEX OR"
  },
  {
    "id": 196,
    "parent": 195,
    "notused": 0,
    "detail": "INDEX 1"
  },
  {
    "id": 205,
    "parent": 196,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)"
  },
  {
    "id": 213,
    "parent": 195,
    "notused": 0,
    "detail": "INDEX 2"
  },
  {
    "id": 222,
    "parent": 213,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_tomb_vfe (version_id=?)"
  },
  {
    "id": 262,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 264,
    "parent": 262,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 306,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 308,
    "parent": 306,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 350,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 352,
    "parent": 350,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 394,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 396,
    "parent": 394,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 438,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 440,
    "parent": 438,
    "notused": 72,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 482,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 486,
    "parent": 482,
    "notused": 0,
    "detail": "MULTI-INDEX OR"
  },
  {
    "id": 487,
    "parent": 486,
    "notused": 0,
    "detail": "INDEX 1"
  },
  {
    "id": 496,
    "parent": 487,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)"
  },
  {
    "id": 504,
    "parent": 486,
    "notused": 0,
    "detail": "INDEX 2"
  },
  {
    "id": 513,
    "parent": 504,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_tomb_vfe (version_id=?)"
  },
  {
    "id": 553,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 555,
    "parent": 553,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 597,
    "parent": 58,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 598,
    "parent": 597,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 599,
    "parent": 598,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 602,
    "parent": 599,
    "notused": 0,
    "detail": "MATERIALIZE version_inheritance"
  },
  {
    "id": 606,
    "parent": 602,
    "notused": 0,
    "detail": "SETUP"
  },
  {
    "id": 609,
    "parent": 606,
    "notused": 28,
    "detail": "SCAN desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent"
  },
  {
    "id": 634,
    "parent": 602,
    "notused": 0,
    "detail": "RECURSIVE STEP"
  },
  {
    "id": 637,
    "parent": 634,
    "notused": 216,
    "detail": "SCAN vir"
  },
  {
    "id": 638,
    "parent": 634,
    "notused": 20,
    "detail": "SEARCH desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent (<expr>=?)"
  },
  {
    "id": 659,
    "parent": 599,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 669,
    "parent": 599,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 681,
    "parent": 599,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 720,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 724,
    "parent": 720,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 732,
    "parent": 720,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 744,
    "parent": 720,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 783,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 787,
    "parent": 783,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 795,
    "parent": 783,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 807,
    "parent": 783,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 846,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 851,
    "parent": 846,
    "notused": 62,
    "detail": "SCAN lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe"
  },
  {
    "id": 859,
    "parent": 846,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 871,
    "parent": 846,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 910,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 914,
    "parent": 910,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 922,
    "parent": 910,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 934,
    "parent": 910,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 973,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 977,
    "parent": 973,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 985,
    "parent": 973,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 997,
    "parent": 973,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1036,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1040,
    "parent": 1036,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 1048,
    "parent": 1036,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 1060,
    "parent": 1036,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1099,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1103,
    "parent": 1099,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 1111,
    "parent": 1099,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 1123,
    "parent": 1099,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1162,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1166,
    "parent": 1162,
    "notused": 72,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 1174,
    "parent": 1162,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 1186,
    "parent": 1162,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1225,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1230,
    "parent": 1225,
    "notused": 62,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe"
  },
  {
    "id": 1238,
    "parent": 1225,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 1250,
    "parent": 1225,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1289,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1293,
    "parent": 1289,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 1301,
    "parent": 1289,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 1313,
    "parent": 1289,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 1352,
    "parent": 598,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1357,
    "parent": 1352,
    "notused": 216,
    "detail": "SCAN vi"
  },
  {
    "id": 1361,
    "parent": 1352,
    "notused": 61,
    "detail": "SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 1405,
    "parent": 58,
    "notused": 227,
    "detail": "SCAN c"
  },
  {
    "id": 1436,
    "parent": 58,
    "notused": 0,
    "detail": "USE TEMP B-TREE FOR ORDER BY"
  },
  {
    "id": 1472,
    "parent": 57,
    "notused": 207,
    "detail": "SCAN (subquery-54)"
  },
  {
    "id": 1552,
    "parent": 10,
    "notused": 0,
    "detail": "MATERIALIZE lix_internal_state_vtable_rewritten"
  },
  {
    "id": 1554,
    "parent": 1552,
    "notused": 0,
    "detail": "CO-ROUTINE ranked"
  },
  {
    "id": 1557,
    "parent": 1554,
    "notused": 0,
    "detail": "CO-ROUTINE (subquery-75)"
  },
  {
    "id": 1559,
    "parent": 1557,
    "notused": 0,
    "detail": "CO-ROUTINE candidates"
  },
  {
    "id": 1560,
    "parent": 1559,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 1561,
    "parent": 1560,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 1563,
    "parent": 1561,
    "notused": 216,
    "detail": "SCAN u"
  },
  {
    "id": 1603,
    "parent": 1560,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1604,
    "parent": 1603,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 1605,
    "parent": 1604,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 1607,
    "parent": 1605,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 1647,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1649,
    "parent": 1647,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 1689,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1691,
    "parent": 1689,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 1731,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1733,
    "parent": 1731,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_active_account"
  },
  {
    "id": 1773,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1775,
    "parent": 1773,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 1815,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1817,
    "parent": 1815,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 1857,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1859,
    "parent": 1857,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 1899,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1901,
    "parent": 1899,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 1941,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1943,
    "parent": 1941,
    "notused": 72,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 1983,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1985,
    "parent": 1983,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label"
  },
  {
    "id": 2025,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2027,
    "parent": 2025,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 2067,
    "parent": 1604,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2068,
    "parent": 2067,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 2069,
    "parent": 2068,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 2072,
    "parent": 2069,
    "notused": 0,
    "detail": "MATERIALIZE version_inheritance"
  },
  {
    "id": 2076,
    "parent": 2072,
    "notused": 0,
    "detail": "SETUP"
  },
  {
    "id": 2079,
    "parent": 2076,
    "notused": 28,
    "detail": "SCAN desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent"
  },
  {
    "id": 2104,
    "parent": 2072,
    "notused": 0,
    "detail": "RECURSIVE STEP"
  },
  {
    "id": 2107,
    "parent": 2104,
    "notused": 216,
    "detail": "SCAN vir"
  },
  {
    "id": 2108,
    "parent": 2104,
    "notused": 20,
    "detail": "SEARCH desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent (<expr>=?)"
  },
  {
    "id": 2129,
    "parent": 2069,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 2137,
    "parent": 2069,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2173,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2177,
    "parent": 2173,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2181,
    "parent": 2173,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_stored_schema (is_tombstone=?)"
  },
  {
    "id": 2204,
    "parent": 2173,
    "notused": 46,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_stored_schema USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2245,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2249,
    "parent": 2245,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 2255,
    "parent": 2245,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2291,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2296,
    "parent": 2291,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2298,
    "parent": 2291,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)"
  },
  {
    "id": 2339,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2343,
    "parent": 2339,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 2349,
    "parent": 2339,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2385,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2389,
    "parent": 2385,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 2395,
    "parent": 2385,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2431,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2435,
    "parent": 2431,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 2441,
    "parent": 2431,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2477,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2481,
    "parent": 2477,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 2487,
    "parent": 2477,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2523,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2527,
    "parent": 2523,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2531,
    "parent": 2523,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_change_set_element (is_tombstone=?)"
  },
  {
    "id": 2554,
    "parent": 2523,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_change_set_element USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2595,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2600,
    "parent": 2595,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2602,
    "parent": 2595,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)"
  },
  {
    "id": 2643,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2647,
    "parent": 2643,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 2653,
    "parent": 2643,
    "notused": 215,
    "detail": "SCAN vi"
  },
  {
    "id": 2689,
    "parent": 2068,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2694,
    "parent": 2689,
    "notused": 216,
    "detail": "SCAN vi"
  },
  {
    "id": 2696,
    "parent": 2689,
    "notused": 61,
    "detail": "SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 2740,
    "parent": 1604,
    "notused": 278,
    "detail": "SCAN c"
  },
  {
    "id": 2769,
    "parent": 1604,
    "notused": 0,
    "detail": "USE TEMP B-TREE FOR ORDER BY"
  },
  {
    "id": 2805,
    "parent": 1603,
    "notused": 278,
    "detail": "SCAN (subquery-75)"
  },
  {
    "id": 2888,
    "parent": 1560,
    "notused": 278,
    "detail": "SCAN w"
  },
  {
    "id": 2893,
    "parent": 1560,
    "notused": 45,
    "detail": "SEARCH ws_dst USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN"
  },
  {
    "id": 2906,
    "parent": 1560,
    "notused": 45,
    "detail": "SEARCH ws_src USING PRIMARY KEY (file_id=? AND version_id=? AND entity_id=? AND schema_key=?) LEFT-JOIN"
  },
  {
    "id": 2922,
    "parent": 1560,
    "notused": 46,
    "detail": "SEARCH chc USING INDEX sqlite_autoindex_lix_internal_change_1 (id=?) LEFT-JOIN"
  },
  {
    "id": 2966,
    "parent": 1559,
    "notused": 207,
    "detail": "SCAN w"
  },
  {
    "id": 2977,
    "parent": 1559,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_vtable_rewritten (version_id=? AND entity_id=? AND schema_key=? AND file_id=?)"
  },
  {
    "id": 2997,
    "parent": 1559,
    "notused": 55,
    "detail": "SEARCH lix_internal_state_vtable_rewritten USING AUTOMATIC PARTIAL COVERING INDEX (version_id=? AND entity_id=? AND schema_key=? AND file_id=?) LEFT-JOIN"
  },
  {
    "id": 3078,
    "parent": 1557,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3080,
    "parent": 3078,
    "notused": 0,
    "detail": "CO-ROUTINE ranked"
  },
  {
    "id": 3083,
    "parent": 3080,
    "notused": 0,
    "detail": "CO-ROUTINE (subquery-96)"
  },
  {
    "id": 3085,
    "parent": 3083,
    "notused": 0,
    "detail": "CO-ROUTINE candidates"
  },
  {
    "id": 3086,
    "parent": 3085,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 3087,
    "parent": 3086,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 3090,
    "parent": 3087,
    "notused": 61,
    "detail": "SEARCH u USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 3133,
    "parent": 3086,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3134,
    "parent": 3133,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 3135,
    "parent": 3134,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 3137,
    "parent": 3135,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 3179,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3181,
    "parent": 3179,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 3223,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3225,
    "parent": 3223,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 3267,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3271,
    "parent": 3267,
    "notused": 0,
    "detail": "MULTI-INDEX OR"
  },
  {
    "id": 3272,
    "parent": 3271,
    "notused": 0,
    "detail": "INDEX 1"
  },
  {
    "id": 3281,
    "parent": 3272,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe (version_id=?)"
  },
  {
    "id": 3289,
    "parent": 3271,
    "notused": 0,
    "detail": "INDEX 2"
  },
  {
    "id": 3298,
    "parent": 3289,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_tomb_vfe (version_id=?)"
  },
  {
    "id": 3338,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3340,
    "parent": 3338,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 3382,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3384,
    "parent": 3382,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 3426,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3428,
    "parent": 3426,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 3470,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3472,
    "parent": 3470,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 3514,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3516,
    "parent": 3514,
    "notused": 72,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 3558,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3562,
    "parent": 3558,
    "notused": 0,
    "detail": "MULTI-INDEX OR"
  },
  {
    "id": 3563,
    "parent": 3562,
    "notused": 0,
    "detail": "INDEX 1"
  },
  {
    "id": 3572,
    "parent": 3563,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe (version_id=?)"
  },
  {
    "id": 3580,
    "parent": 3562,
    "notused": 0,
    "detail": "INDEX 2"
  },
  {
    "id": 3589,
    "parent": 3580,
    "notused": 27,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_tomb_vfe (version_id=?)"
  },
  {
    "id": 3629,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3631,
    "parent": 3629,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 3673,
    "parent": 3134,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3674,
    "parent": 3673,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 3675,
    "parent": 3674,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 3678,
    "parent": 3675,
    "notused": 0,
    "detail": "MATERIALIZE version_inheritance"
  },
  {
    "id": 3682,
    "parent": 3678,
    "notused": 0,
    "detail": "SETUP"
  },
  {
    "id": 3685,
    "parent": 3682,
    "notused": 28,
    "detail": "SCAN desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent"
  },
  {
    "id": 3710,
    "parent": 3678,
    "notused": 0,
    "detail": "RECURSIVE STEP"
  },
  {
    "id": 3713,
    "parent": 3710,
    "notused": 216,
    "detail": "SCAN vir"
  },
  {
    "id": 3714,
    "parent": 3710,
    "notused": 20,
    "detail": "SEARCH desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent (<expr>=?)"
  },
  {
    "id": 3735,
    "parent": 3675,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 3745,
    "parent": 3675,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 3757,
    "parent": 3675,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 3796,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3800,
    "parent": 3796,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 3808,
    "parent": 3796,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 3820,
    "parent": 3796,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 3859,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3863,
    "parent": 3859,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 3871,
    "parent": 3859,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 3883,
    "parent": 3859,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 3922,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3927,
    "parent": 3922,
    "notused": 62,
    "detail": "SCAN lix_internal_state_cache_v1_lix_active_account USING INDEX idx_lix_internal_state_cache_v1_lix_active_account_live_vfe"
  },
  {
    "id": 3935,
    "parent": 3922,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 3947,
    "parent": 3922,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 3986,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 3990,
    "parent": 3986,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 3998,
    "parent": 3986,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4010,
    "parent": 3986,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4049,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4053,
    "parent": 4049,
    "notused": 48,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 4061,
    "parent": 4049,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4073,
    "parent": 4049,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4112,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4116,
    "parent": 4112,
    "notused": 36,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 4124,
    "parent": 4112,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4136,
    "parent": 4112,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4175,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4179,
    "parent": 4175,
    "notused": 53,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 4187,
    "parent": 4175,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4199,
    "parent": 4175,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4238,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4242,
    "parent": 4238,
    "notused": 72,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 4250,
    "parent": 4238,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4262,
    "parent": 4238,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4301,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4306,
    "parent": 4301,
    "notused": 62,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe"
  },
  {
    "id": 4314,
    "parent": 4301,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4326,
    "parent": 4301,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4365,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4369,
    "parent": 4365,
    "notused": 32,
    "detail": "SCAN lix_internal_state_cache_v1_test_bench_diff_entity"
  },
  {
    "id": 4377,
    "parent": 4365,
    "notused": 0,
    "detail": "BLOOM FILTER ON vi (version_id=?)"
  },
  {
    "id": 4389,
    "parent": 4365,
    "notused": 53,
    "detail": "SEARCH vi USING AUTOMATIC PARTIAL COVERING INDEX (version_id=?)"
  },
  {
    "id": 4428,
    "parent": 3674,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 4433,
    "parent": 4428,
    "notused": 216,
    "detail": "SCAN vi"
  },
  {
    "id": 4437,
    "parent": 4428,
    "notused": 61,
    "detail": "SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 4481,
    "parent": 3134,
    "notused": 227,
    "detail": "SCAN c"
  },
  {
    "id": 4512,
    "parent": 3134,
    "notused": 0,
    "detail": "USE TEMP B-TREE FOR ORDER BY"
  },
  {
    "id": 4548,
    "parent": 3133,
    "notused": 207,
    "detail": "SCAN (subquery-96)"
  },
  {
    "id": 4628,
    "parent": 3086,
    "notused": 207,
    "detail": "SCAN w"
  },
  {
    "id": 4639,
    "parent": 3086,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_vtable_rewritten (version_id=? AND entity_id=? AND schema_key=? AND file_id=?)"
  },
  {
    "id": 4655,
    "parent": 3086,
    "notused": 53,
    "detail": "SEARCH lix_internal_state_vtable_rewritten USING AUTOMATIC PARTIAL COVERING INDEX (version_id=? AND entity_id=? AND schema_key=? AND file_id=?) LEFT-JOIN"
  }
]