-- label --
state select â€¢ untracked filter

-- original SQL --
SELECT entity_id
        FROM state
        WHERE untracked = 1 AND schema_key = ?
        LIMIT 1

-- expanded SQL --
SELECT entity_id
        FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      metadata
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS state_all
    WHERE version_id IN (SELECT version_id FROM ( SELECT
  json_extract(sa.snapshot_content, '$.id') AS id,
  json_extract(sa.snapshot_content, '$.version_id') AS version_id,
  sa.entity_id AS lixcol_entity_id,
  sa.schema_key AS lixcol_schema_key,
  sa.file_id AS lixcol_file_id,
  sa.plugin_key AS lixcol_plugin_key,
  COALESCE(sa.inherited_from_version_id, 'global') AS lixcol_inherited_from_version_id,
  sa.created_at AS lixcol_created_at,
  sa.updated_at AS lixcol_updated_at,
  sa.change_id AS lixcol_change_id,
  sa.untracked AS lixcol_untracked,
  sa.commit_id AS lixcol_commit_id,
  sa.metadata AS lixcol_metadata
FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS sa
WHERE sa.schema_key = 'lix_active_version'
  AND sa.version_id = 'global' ) AS active_version) ) AS state
        WHERE untracked = 1 AND schema_key = ?
        LIMIT 1

-- rewritten SQL --
WITH
-- hoisted_lix_internal_state_vtable_rewrite
lix_internal_state_vtable_rewritten AS (
  WITH RECURSIVE
    version_descriptor_base AS (
      SELECT
        json_extract(desc.snapshot_content, '$.id') AS version_id,
        json_extract(desc.snapshot_content, '$.inherits_from_version_id') AS inherits_from_version_id
      FROM lix_internal_state_cache_v1_lix_version_descriptor desc
    ),
    version_inheritance(version_id, ancestor_version_id) AS (
      SELECT
        vdb.version_id,
        vdb.inherits_from_version_id
      FROM version_descriptor_base vdb
      WHERE vdb.inherits_from_version_id IS NOT NULL

      UNION ALL

      SELECT
        vir.version_id,
        vdb.inherits_from_version_id
      FROM version_inheritance vir
      JOIN version_descriptor_base vdb ON vdb.version_id = vir.ancestor_version_id
      WHERE vdb.inherits_from_version_id IS NOT NULL
    ),
    version_parent AS (
      SELECT
        vdb.version_id,
        vdb.inherits_from_version_id AS parent_version_id
      FROM version_descriptor_base vdb
      WHERE vdb.inherits_from_version_id IS NOT NULL
    )
  ,
    candidates AS (
      SELECT
        'U' || '~' || lix_encode_pk_part(u.file_id) || '~' || lix_encode_pk_part(u.entity_id) || '~' || lix_encode_pk_part(u.version_id) AS _pk,
        u.entity_id,
        u.schema_key,
        u.file_id,
        u.plugin_key,
        json(u.snapshot_content) AS snapshot_content,
        u.schema_version,
        u.version_id AS src_version_id,
        u.version_id AS dst_version_id,
        u.created_at,
        u.updated_at,
        NULL AS inherited_from_version_id,
        'untracked' AS change_id,
        1 AS untracked,
        'untracked' AS commit_id,
        NULL AS metadata,
        2 AS priority
      FROM lix_internal_state_all_untracked u
      WHERE (
        (u.is_tombstone = 0 AND u.snapshot_content IS NOT NULL) OR
        (u.is_tombstone = 1 AND u.snapshot_content IS NULL)
      )

      UNION ALL

      SELECT
        'C' || '~' || lix_encode_pk_part(c.file_id) || '~' || lix_encode_pk_part(c.entity_id) || '~' || lix_encode_pk_part(c.version_id) AS _pk,
        c.entity_id,
        c.schema_key,
        c.file_id,
        c.plugin_key,
        json(c.snapshot_content) AS snapshot_content,
        c.schema_version,
        c.version_id AS src_version_id,
        c.version_id AS dst_version_id,
        c.created_at,
        c.updated_at,
        c.inherited_from_version_id,
        c.change_id,
        0 AS untracked,
        c.commit_id,
        NULL AS metadata,
        3 AS priority
      FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_descriptor
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit_edge
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set_element
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_label
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_tip
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_stored_schema
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_key_value
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_bench_state_view) c
      WHERE (
        (c.is_tombstone = 0 AND c.snapshot_content IS NOT NULL) OR
        (c.is_tombstone = 1 AND c.snapshot_content IS NULL)
      )

      UNION ALL

      SELECT
        'CI' || '~' || lix_encode_pk_part(isc.file_id) || '~' || lix_encode_pk_part(isc.entity_id) || '~' || lix_encode_pk_part(vi.version_id) AS _pk,
        isc.entity_id,
        isc.schema_key,
        isc.file_id,
        isc.plugin_key,
        json(isc.snapshot_content) AS snapshot_content,
        isc.schema_version,
        isc.version_id AS src_version_id,
        vi.version_id AS dst_version_id,
        isc.created_at,
        isc.updated_at,
        isc.version_id AS inherited_from_version_id,
        isc.change_id,
        0 AS untracked,
        isc.commit_id,
        NULL AS metadata,
        4 AS priority
      FROM version_inheritance vi
      JOIN (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_descriptor
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_commit_edge
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_change_set_element
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_label
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_version_tip
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_stored_schema
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_lix_key_value
  UNION ALL
  SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, is_tombstone, change_id, commit_id FROM lix_internal_state_cache_v1_bench_state_view) isc ON isc.version_id = vi.ancestor_version_id
      WHERE isc.is_tombstone = 0
        AND isc.snapshot_content IS NOT NULL

      UNION ALL

      SELECT
        'UI' || '~' || lix_encode_pk_part(unt.file_id) || '~' || lix_encode_pk_part(unt.entity_id) || '~' || lix_encode_pk_part(vi.version_id) AS _pk,
        unt.entity_id,
        unt.schema_key,
        unt.file_id,
        unt.plugin_key,
        json(unt.snapshot_content) AS snapshot_content,
        unt.schema_version,
        unt.version_id AS src_version_id,
        vi.version_id AS dst_version_id,
        unt.created_at,
        unt.updated_at,
        unt.version_id AS inherited_from_version_id,
        'untracked' AS change_id,
        1 AS untracked,
        'untracked' AS commit_id,
        NULL AS metadata,
        5 AS priority
      FROM version_inheritance vi
      JOIN lix_internal_state_all_untracked unt ON unt.version_id = vi.ancestor_version_id
      WHERE unt.is_tombstone = 0
        AND unt.snapshot_content IS NOT NULL
    ),
    ranked AS (
      SELECT
        c._pk,
        c.entity_id,
        c.schema_key,
        c.file_id,
        c.plugin_key,
        c.snapshot_content,
        c.schema_version,
        c.dst_version_id AS version_id,
        c.created_at,
        c.updated_at,
        c.inherited_from_version_id,
        c.change_id,
        c.untracked,
        c.commit_id,
        c.metadata,
        c.priority,
        ROW_NUMBER() OVER (
          PARTITION BY c.file_id, c.schema_key, c.entity_id, c.dst_version_id
          ORDER BY c.priority,
                   c.created_at DESC,
                   c._pk
        ) AS rn
      FROM candidates c

    )
  SELECT
    w._pk,
    w.entity_id,
    w.schema_key,
    w.file_id,
    w.plugin_key,
    w.snapshot_content,
    w.schema_version,
    w.version_id,
    w.created_at,
    w.updated_at,
    w.inherited_from_version_id,
    w.change_id,
    w.untracked,
    w.commit_id,
    COALESCE(w.metadata, json(chc.metadata)) AS metadata,
    COALESCE(ws_dst.writer_key, ws_src.writer_key) AS writer_key
  FROM ranked w
  LEFT JOIN lix_internal_state_writer ws_dst ON
    ws_dst.file_id = w.file_id AND
    ws_dst.entity_id = w.entity_id AND
    ws_dst.schema_key = w.schema_key AND
    ws_dst.version_id = w.version_id
  LEFT JOIN lix_internal_state_writer ws_src ON
    ws_src.file_id = w.file_id AND
    ws_src.entity_id = w.entity_id AND
    ws_src.schema_key = w.schema_key AND
    ws_src.version_id = COALESCE(w.inherited_from_version_id, w.version_id)
  LEFT JOIN lix_internal_change chc ON chc.id = w.change_id

  WHERE w.rn = 1

)
SELECT entity_id
        FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      metadata
    FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, change_id, untracked, commit_id, metadata, writer_key FROM lix_internal_state_vtable_rewritten) AS lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS state_all
    WHERE version_id IN (SELECT version_id FROM ( SELECT
  json_extract(sa.snapshot_content, '$.id') AS id,
  json_extract(sa.snapshot_content, '$.version_id') AS version_id,
  sa.entity_id AS lixcol_entity_id,
  sa.schema_key AS lixcol_schema_key,
  sa.file_id AS lixcol_file_id,
  sa.plugin_key AS lixcol_plugin_key,
  COALESCE(sa.inherited_from_version_id, 'global') AS lixcol_inherited_from_version_id,
  sa.created_at AS lixcol_created_at,
  sa.updated_at AS lixcol_updated_at,
  sa.change_id AS lixcol_change_id,
  sa.untracked AS lixcol_untracked,
  sa.commit_id AS lixcol_commit_id,
  sa.metadata AS lixcol_metadata
FROM ( SELECT 
      entity_id,
      schema_key,
      file_id,
      version_id,
      plugin_key,
      snapshot_content,
      schema_version,
      created_at,
      updated_at,
      inherited_from_version_id,
      change_id,
      untracked,
      commit_id,
      writer_key,
      (
        SELECT json(metadata)
        FROM change
        WHERE change.id = lix_internal_state_vtable.change_id
      ) AS metadata
    FROM (SELECT entity_id, schema_key, file_id, plugin_key, snapshot_content, schema_version, version_id, created_at, updated_at, inherited_from_version_id, change_id, untracked, commit_id, metadata, writer_key FROM lix_internal_state_vtable_rewritten) AS lix_internal_state_vtable
    WHERE snapshot_content IS NOT NULL ) AS sa
WHERE sa.schema_key = 'lix_active_version'
  AND sa.version_id = 'global' ) AS active_version) ) AS state
        WHERE untracked = 1 AND schema_key = ?1
        LIMIT 1

-- plan --
[
  {
    "id": 2,
    "parent": 0,
    "notused": 0,
    "detail": "CO-ROUTINE ranked"
  },
  {
    "id": 5,
    "parent": 2,
    "notused": 0,
    "detail": "CO-ROUTINE (subquery-45)"
  },
  {
    "id": 7,
    "parent": 5,
    "notused": 0,
    "detail": "CO-ROUTINE candidates"
  },
  {
    "id": 8,
    "parent": 7,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 9,
    "parent": 8,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 11,
    "parent": 9,
    "notused": 216,
    "detail": "SCAN u"
  },
  {
    "id": 53,
    "parent": 8,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 54,
    "parent": 53,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 55,
    "parent": 54,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 57,
    "parent": 55,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 99,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 101,
    "parent": 99,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 143,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 145,
    "parent": 143,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 187,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 189,
    "parent": 187,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 231,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 233,
    "parent": 231,
    "notused": 82,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 275,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 277,
    "parent": 275,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label"
  },
  {
    "id": 319,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 321,
    "parent": 319,
    "notused": 26,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 363,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 365,
    "parent": 363,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 407,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 409,
    "parent": 407,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 451,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 453,
    "parent": 451,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_bench_state_view"
  },
  {
    "id": 495,
    "parent": 54,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 496,
    "parent": 495,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 497,
    "parent": 496,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 500,
    "parent": 497,
    "notused": 0,
    "detail": "MATERIALIZE version_inheritance"
  },
  {
    "id": 504,
    "parent": 500,
    "notused": 0,
    "detail": "SETUP"
  },
  {
    "id": 507,
    "parent": 504,
    "notused": 212,
    "detail": "SCAN desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent"
  },
  {
    "id": 532,
    "parent": 500,
    "notused": 0,
    "detail": "RECURSIVE STEP"
  },
  {
    "id": 535,
    "parent": 532,
    "notused": 216,
    "detail": "SCAN vir"
  },
  {
    "id": 536,
    "parent": 532,
    "notused": 54,
    "detail": "SEARCH desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent (<expr>=?)"
  },
  {
    "id": 558,
    "parent": 497,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe"
  },
  {
    "id": 568,
    "parent": 497,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 604,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 608,
    "parent": 604,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 612,
    "parent": 604,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_commit (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 637,
    "parent": 604,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_commit USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 681,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 685,
    "parent": 681,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 689,
    "parent": 681,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_commit_edge (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 714,
    "parent": 681,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_commit_edge USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 758,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 762,
    "parent": 758,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 766,
    "parent": 758,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_change_set (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 791,
    "parent": 758,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_change_set USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 835,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 839,
    "parent": 835,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 843,
    "parent": 835,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_change_set_element (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 868,
    "parent": 835,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_change_set_element USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 912,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 917,
    "parent": 912,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe"
  },
  {
    "id": 925,
    "parent": 912,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 961,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 965,
    "parent": 961,
    "notused": 26,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 973,
    "parent": 961,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 1009,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1013,
    "parent": 1009,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 1021,
    "parent": 1009,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 1057,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1062,
    "parent": 1057,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe"
  },
  {
    "id": 1070,
    "parent": 1057,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 1106,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1110,
    "parent": 1106,
    "notused": 248,
    "detail": "SCAN vi"
  },
  {
    "id": 1114,
    "parent": 1106,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_bench_state_view (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 1139,
    "parent": 1106,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_bench_state_view USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=? AND schema_key=?)"
  },
  {
    "id": 1183,
    "parent": 496,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1188,
    "parent": 1183,
    "notused": 216,
    "detail": "SCAN vi"
  },
  {
    "id": 1190,
    "parent": 1183,
    "notused": 61,
    "detail": "SEARCH unt USING INDEX idx_lix_internal_state_all_untracked_version_id (version_id=?)"
  },
  {
    "id": 1236,
    "parent": 54,
    "notused": 315,
    "detail": "SCAN c"
  },
  {
    "id": 1267,
    "parent": 54,
    "notused": 0,
    "detail": "USE TEMP B-TREE FOR ORDER BY"
  },
  {
    "id": 1303,
    "parent": 53,
    "notused": 295,
    "detail": "SCAN (subquery-45)"
  },
  {
    "id": 1382,
    "parent": 8,
    "notused": 295,
    "detail": "SCAN w"
  },
  {
    "id": 1396,
    "parent": 8,
    "notused": 0,
    "detail": "LIST SUBQUERY 38"
  },
  {
    "id": 1400,
    "parent": 1396,
    "notused": 0,
    "detail": "MATERIALIZE ranked"
  },
  {
    "id": 1403,
    "parent": 1400,
    "notused": 0,
    "detail": "CO-ROUTINE (subquery-64)"
  },
  {
    "id": 1406,
    "parent": 1403,
    "notused": 0,
    "detail": "MATERIALIZE candidates"
  },
  {
    "id": 1408,
    "parent": 1406,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 1409,
    "parent": 1408,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 1411,
    "parent": 1409,
    "notused": 216,
    "detail": "SCAN u"
  },
  {
    "id": 1453,
    "parent": 1408,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1454,
    "parent": 1453,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 1455,
    "parent": 1454,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 1457,
    "parent": 1455,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor"
  },
  {
    "id": 1499,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1501,
    "parent": 1499,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit"
  },
  {
    "id": 1543,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1545,
    "parent": 1543,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_commit_edge"
  },
  {
    "id": 1587,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1589,
    "parent": 1587,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set"
  },
  {
    "id": 1631,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1633,
    "parent": 1631,
    "notused": 82,
    "detail": "SCAN lix_internal_state_cache_v1_lix_change_set_element"
  },
  {
    "id": 1675,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1677,
    "parent": 1675,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label"
  },
  {
    "id": 1719,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1721,
    "parent": 1719,
    "notused": 26,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 1763,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1765,
    "parent": 1763,
    "notused": 59,
    "detail": "SCAN lix_internal_state_cache_v1_lix_stored_schema"
  },
  {
    "id": 1807,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1809,
    "parent": 1807,
    "notused": 216,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value"
  },
  {
    "id": 1851,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1853,
    "parent": 1851,
    "notused": 76,
    "detail": "SCAN lix_internal_state_cache_v1_bench_state_view"
  },
  {
    "id": 1895,
    "parent": 1454,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 1896,
    "parent": 1895,
    "notused": 0,
    "detail": "COMPOUND QUERY"
  },
  {
    "id": 1897,
    "parent": 1896,
    "notused": 0,
    "detail": "LEFT-MOST SUBQUERY"
  },
  {
    "id": 1900,
    "parent": 1897,
    "notused": 0,
    "detail": "MATERIALIZE version_inheritance"
  },
  {
    "id": 1904,
    "parent": 1900,
    "notused": 0,
    "detail": "SETUP"
  },
  {
    "id": 1907,
    "parent": 1904,
    "notused": 212,
    "detail": "SCAN desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent"
  },
  {
    "id": 1932,
    "parent": 1900,
    "notused": 0,
    "detail": "RECURSIVE STEP"
  },
  {
    "id": 1935,
    "parent": 1932,
    "notused": 216,
    "detail": "SCAN vir"
  },
  {
    "id": 1936,
    "parent": 1932,
    "notused": 54,
    "detail": "SEARCH desc USING COVERING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_id_parent (<expr>=?)"
  },
  {
    "id": 1958,
    "parent": 1897,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_descriptor USING INDEX idx_lix_internal_state_cache_v1_lix_version_descriptor_live_vfe"
  },
  {
    "id": 1966,
    "parent": 1897,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2004,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2008,
    "parent": 2004,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2012,
    "parent": 2004,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_commit (is_tombstone=?)"
  },
  {
    "id": 2035,
    "parent": 2004,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_commit USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2078,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2082,
    "parent": 2078,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2086,
    "parent": 2078,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_commit_edge (is_tombstone=?)"
  },
  {
    "id": 2109,
    "parent": 2078,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_commit_edge USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2152,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2156,
    "parent": 2152,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2160,
    "parent": 2152,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_change_set (is_tombstone=?)"
  },
  {
    "id": 2183,
    "parent": 2152,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_change_set USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2226,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2230,
    "parent": 2226,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2234,
    "parent": 2226,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_change_set_element (is_tombstone=?)"
  },
  {
    "id": 2257,
    "parent": 2226,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_change_set_element USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2300,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2305,
    "parent": 2300,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_label USING INDEX idx_lix_internal_state_cache_v1_lix_label_live_vfe"
  },
  {
    "id": 2311,
    "parent": 2300,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2349,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2353,
    "parent": 2349,
    "notused": 26,
    "detail": "SCAN lix_internal_state_cache_v1_lix_version_tip"
  },
  {
    "id": 2359,
    "parent": 2349,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2397,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2401,
    "parent": 2397,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2405,
    "parent": 2397,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_lix_stored_schema (is_tombstone=?)"
  },
  {
    "id": 2428,
    "parent": 2397,
    "notused": 46,
    "detail": "SEARCH lix_internal_state_cache_v1_lix_stored_schema USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2471,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2476,
    "parent": 2471,
    "notused": 24,
    "detail": "SCAN lix_internal_state_cache_v1_lix_key_value USING INDEX idx_lix_internal_state_cache_v1_lix_key_value_live_vfe"
  },
  {
    "id": 2482,
    "parent": 2471,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2520,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2524,
    "parent": 2520,
    "notused": 296,
    "detail": "SCAN vi"
  },
  {
    "id": 2528,
    "parent": 2520,
    "notused": 0,
    "detail": "BLOOM FILTER ON lix_internal_state_cache_v1_bench_state_view (is_tombstone=?)"
  },
  {
    "id": 2551,
    "parent": 2520,
    "notused": 47,
    "detail": "SEARCH lix_internal_state_cache_v1_bench_state_view USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2594,
    "parent": 1896,
    "notused": 0,
    "detail": "UNION ALL"
  },
  {
    "id": 2598,
    "parent": 2594,
    "notused": 216,
    "detail": "SCAN vi"
  },
  {
    "id": 2602,
    "parent": 2594,
    "notused": 0,
    "detail": "BLOOM FILTER ON unt (is_tombstone=?)"
  },
  {
    "id": 2624,
    "parent": 2594,
    "notused": 53,
    "detail": "SEARCH unt USING AUTOMATIC PARTIAL COVERING INDEX (is_tombstone=?)"
  },
  {
    "id": 2671,
    "parent": 1454,
    "notused": 369,
    "detail": "SCAN c"
  },
  {
    "id": 2699,
    "parent": 1454,
    "notused": 0,
    "detail": "USE TEMP B-TREE FOR ORDER BY"
  },
  {
    "id": 2736,
    "parent": 1453,
    "notused": 336,
    "detail": "SCAN (subquery-64)"
  },
  {
    "id": 2820,
    "parent": 1408,
    "notused": 0,
    "detail": "BLOOM FILTER ON w (rn=? AND schema_key=? AND version_id=?)"
  },
  {
    "id": 2844,
    "parent": 1408,
    "notused": 57,
    "detail": "SEARCH w USING AUTOMATIC PARTIAL COVERING INDEX (rn=? AND schema_key=? AND version_id=?)"
  },
  {
    "id": 2859,
    "parent": 1408,
    "notused": 0,
    "detail": "CREATE BLOOM FILTER"
  }
]
