import CodeSnippet from "./components/code-snippet";
import * as example from "./examples/diffs.ts";
import exampleSrcCode from "./examples/diffs.ts?raw";

# Diffs

Lix provides before/after states at the file or [entity](/docs/schemas) level. You can diff entire files or individual entities (JSON properties, CSV rows, Markdown paragraphs, etc.).

[Schema-aware](/docs/schemas) diffs mean changes are semantic: "price changed from $10 to $12" instead of "line 5 changed."

![Diff](/diff.svg)

## Getting Diff Data

Query data at two different [versions](/docs/versions) to get before/after states.

### File Level Diff

Get the complete state of a file at two [versions](/docs/versions):

<CodeSnippet
  module={example}
  srcCode={exampleSrcCode}
  sections={["json-file-diff"]}
/>

### Entity Level Diff

For better performance, query a single [entity](/docs/schemas) at two [versions](/docs/versions) instead of loading the entire file:

<CodeSnippet
  module={example}
  srcCode={exampleSrcCode}
  sections={["entity-diff"]}
/>

## Rendering Diffs

Lix provides before/after data. You choose how to visualize it:

| Approach               | Best For                                                   | Control Level |
| :--------------------- | :--------------------------------------------------------- | :------------ |
| **Use a Plugin's UI**  | Quick integration with standard, pre-built components.     | Low           |
| **Use a Diff Library** | Custom integration with powerful, pre-built diffing logic. | Medium        |
| **Build Your Own UI**  | Complete control for bespoke or complex visualizations.    | High          |

### Use a Plugin's UI

[Plugins](/docs/plugins) can provide ready-to-use diff components. Fastest way to display changes:

<CodeSnippet
  module={example}
  srcCode={exampleSrcCode}
  sections={["plugin-diffs"]}
/>

### Use a Diff Library

Use a library to visualize changes. Options include [diff](https://www.npmjs.com/package/diff) for text or [@lix-js/html-diff](https://github.com/opral/monorepo/tree/main/packages/lix/html-diff) for comparing rendered HTML output.

### Build Your Own UI

Build custom diff rendering with complete control. Lix provides structured before/after states for any visualization you need.

![Diffs come in many different types](/diffs-many-types.svg)
